<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Spiiin&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://spiiin.github.io/"/>
  <updated>2021-01-18T00:20:42.397Z</updated>
  <id>http://spiiin.github.io/</id>
  
  <author>
    <name>spiiin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Итоги 2020</title>
    <link href="http://spiiin.github.io/blog/307513906/"/>
    <id>http://spiiin.github.io/blog/307513906/</id>
    <published>2021-01-17T14:36:47.000Z</published>
    <updated>2021-01-18T00:20:42.397Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Никогда не подводил итогов года, но почему бы не начать в этом.</p><a id="more"></a><p><strong><code>Дисклеймер</code></strong><br>Я, как и все остальные люди, склонен обращать больше внимания на успехи в своей жизни, чем на пиздецы и фейлы, поэтому перед позитивными итогами этого года, сначала немного негативные итоги предыдущих, но сжато.</p><p>Прошлый год стал для меня переломным в том плане, что прекратил попытки решить все накопленные проблемы одновременно. А накопились они по причине того, что загнал себя в замкнутый круг попыткой решать их не по одной, а все сразу - наладить личную жизнь, заняться обустройством дома и поменять работу одновременно.</p><p>Вместо полноценной работы выбрал несколько часов фриланса в день, чтобы хватало времени на ремонт старого дома, однако в таком режиме не хватало денег на отдых. Для того, чтобы найти нормальные отношения не хватало времени из-за ремонта и фриланса, а на полноценную работу не хватало времени из-за отношений и ремонта. Сейчас я понимаю, что стоило просто посоветоваться с кем-то, кто был опытнее и умнее, или просто мог посмотреть на мои проблемы со стороны (такие люди были, просто я их не замечал или не слушал). Но спасибо и тем, кто просто был рядом, без всяких советов.</p><p>В итоге, после того, как слёг на несколько недель с температурой, пришлось начинать с нуля ещё раз, на этот раз с упором на работу. Мир устроен так, что с помощью денег остальное тоже становится проще, главное не забывать, что это лишь средство, а не цель. Ну и то, что это средство решать не только ваши персональные проблемы, но ещё и тех, кому вы хотите помочь.</p><p>Попутно, к сожалению или к счастью, прекратил общение со многими старыми знакомыми – до сих пор плохо умею разрывать контакты. Кто-то перестал общаться со мной, часто обоснованно. Пришлось усвоить несколько неприятных уроков общения, и то, что люди могут быть опаснее для окружающих, чем показывают, и даже, чем думают сами. Самый опасный хищник – тот, кто считает себя праведником.</p><p>Тем не менее, я всё ещё уверен, что большинство людей в мире по-умолчанию стремятся к построению любых отношений с другими по принципу win-win, и это прекрасно.</p><p>Йоханга.</p><p><strong><code>Путешествия</code></strong><br>В конце прошлого года, перед рождеством, побывал в Сингапуре, в небольшой командировке. Яркий футуристический неоновый город с небоскрёбами, казино и красивейшими Botanic Gargdens.</p><p><img src="/blog/307513906/singapur_small.jpg" alt="foxy"></p><p>В этом съездил в Крым зимой и летом – увидеться с родственниками, и погулять с палатками по разным уголкам и устроить гастротур по местным малоизвестным ресторанчикам. Бахчисарай-Севастополь-Инжир-Айа-Коктебель. Хотелось ещё заскочить в западный Крым, но немного не хватило времени.</p><p><img src="/blog/307513906/ingir_small.jpg" alt="ingir"></p><p><strong><code>Работа</code></strong></p><p>За пару месяцев перед началом локдауна я стал лидом проекта, который скоро нужно было запускать на софт. Поэтому после закрытия офисов (учитывая, что работа вне офиса до этого не практиковалась), баланс между кодингом и решением всевозможных организационных вопросов сместился где-то на 15%/85%, что было очень сильно непривычно в начале. Софт, естественно, немного задержался, но явно меньше, чем мог бы. Хотя в итоге после выхода игры, ещё где-то неделю до отпуска было ощущение не то, что выгорания, а сгорания.</p><p>Сама игра – <a href="https://mytona.com/game/6" target="_blank" rel="noopener">Crooked Pines</a></p><p><img src="/blog/307513906/cp_small.jpg" alt="cp"></p><p>Одно из самых ярких впечатлений года - в апреле собрались попрощаться втроём в Парке 300-летия с ребятами, с которыми за время работы в офисе установилась какая-то безумная творческая атмосфера, когда понимаешь, что получаешь настоящий кайф от работы, восхищаешься тем, что делают другие и делаешь сам. Грустно понимать, что вчера было так, а через несколько дней разлетаемся на 6000 километров.</p><p><img src="/blog/307513906/park_small.jpg" alt="park"></p><p>Ещё разок удалось вспомнить, что такое тимбилдинг и командный дух во время одного из релизов апдейтов - когда к 4-5 утра исправляются последние ошибки, и нервные шутки от команды QA перед последней (или непоследней, как повезёт) проверкой игры. Это выматывает физически и психологически, зато объединяет, формирует ядро команды, и проявляет волевые качества людей. Все остальные формы корпоративного “тимбилдинга” - это просто пьянки на деньги компании (что, конечно, тоже здорово).</p><p>Дальше - обустройство домашнего рабочего места и попытки найти себя в новой реальности пандемии.</p><p><img src="/blog/307513906/home_small.jpg" alt="home"></p><p><strong><code>Личное</code></strong></p><p>Работая в it-компании, программисты (особо после релокейта) не особо заморачиваются с обустройством жилища, так как всё равно местом обитания является офис со всеми возможными плюшками, а дом является место ночлежки. Поэтому если приходится проводить дома почти всё время, вынужденно приходится привести рабочее место в порядок (отдельная приятная опция работы в хорошей компании - возмещение расходов на все минимально необходимые вещи).</p><p>Надежды, что пандемия закончится быстро, я не питал, поэтому просто принялся перестраивать быт с расчётом на то, что придётся отсиживаться долго. Т.е. просто изучил всё что, было рядом с домом. Я живу в Питере на Пискарёвке - кругом обнаружилось множество парков, старое Богословское кладбище и железнодорожная станция с электричками, на которых можно было начать изучать Ленобласть и окрестности. Особенно запомнились поездки на Хепоярви - там можно бродить пешком, кататься на великах, жарить шашлыки и заниматься активным отдыхом.</p><p><img src="/blog/307513906/hepoyarvi_small.jpg" alt="hepoyarvi"></p><p>Чтобы минимизировать риск заразиться, но не сойти с ума в изоляции, пытался общаться с небольшой замкнутой компанией друзей и коллег, также поддерживающих подобную стратегию изоляции.</p><p>Случайно встретил свою вторую половинку.<br>Просто наплевали на все правила, пили пиво на закрытой на карантин детской площадке (какая разница, если вокруг пост-апокалипсис?), гуляли по всё тому же Парку 300-летия ночью, смотрели на рассвет с какой-то крыши, и поняли, что нашли друг друга.</p><p><img src="/blog/307513906/foxy_small.jpg" alt="foxy"></p><p><strong><code>Музыка</code></strong><br>Мой гимн этой весны, в связи с коронавирусом, однозначно - <code>AnnenMayKantereit &amp; K.I.Z. - Hurra die Welt geht unter</code><br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/0nouhZQqtx4" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p>Также моим личным открытием стал электро-свинг - музыка и танцы. Мечтаю разучить несколько движений и научиться совмещаться их с жонглёрскими движениями.<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/S_874GjbUII" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p>Ну, и знатный стёб от Гудкова - <code>Cream Soda - Никаких больше вечеринок</code>. В одном из клипов нашёл прикольное место, которое хочется посетить в 2021 году – <a href="https://www.google.com/search?q=%D0%BA%D0%BE%D0%BD%D0%B4%D1%83%D0%BA%D0%B8&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=2ahUKEwiknfXktKPuAhUomYsKHfKoCUwQ_AUoAXoECBMQAw&amp;biw=1920&amp;bih=947" target="_blank" rel="noopener">Кондуки</a><br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/M95iEQx20Ag" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><strong><code>Приобретения</code></strong></p><p>Ещё вначале года я был уверен, что никогда не решусь завести собаку в квартире, и вообще, с собаками так грустно прощаться, что хочется завести её лет за 15-20 до собственной смерти, не раньше. Но к середине года я решил, что мне нужен друг и товарищ, с которым можно бродить по паркам и дрессировать его. Всё детство я жил в частном доме, в котором были дворняги, но при заведения собственного собакена решил попробовать породистого.</p><p>С трудом удержался от охотничьего по натуре джека-рассела, переключившись на генетических пастухов – корги. После поездки за город в питомник, у меня дома появился двухмесячный разноглазый кардиган-мерль Халк (потому что цветом как камень <code>Халцедон</code>).</p><p><img src="/blog/307513906/corgi_small.jpg" alt="corgi"></p><p>Чтобы играть в свободное время, купил себе <code>Nintendo Switch</code>, играл в основном в хиты от самой нинтендо, ну и ещё в пару игр. Больше всего зашли:</p><p><code>- Witcher 3</code><br>Люблю всю серию, во всех проявлениях, особенно приятно попробовать ещё раз на мобильной платформе в дороге.<br><code>- Legend of Zelda: Breath of the Wild</code><br>Интересная песочница, сильно погружает в простой сказочный мир<br><code>- Spiritfarer</code><br>Ферма с несколькими историями про прощание перед смертью, трогательная и в начале, но с запоротой концовкой.</p><p><strong><code>Развитие</code></strong></p><p>Этот год в основном прошёл в работе (причём, в работе с головой), больше в прокачке софт-скиллов.</p><p>Тем не менее, немного занимался более внимательным изучением новых стандартов C++ (11-17), минималистичного подхода в дизайне библиотек для C/C++ (<code>fmt</code>, <code>sokol</code>, <code>imgui</code>, <code>bgfx</code>, etc), а также паттерна <code>ECS</code>.</p><p>Раньше для любого пет-проджекта хотелось взять что-нибудь отличное от C++, из-за очарования battery-included философии Python и C# - проще было взять готовый монструозный пакет со всем сразу, и быстрее начинать писать код. Сейчас стало интереснее научиться решать задачу минимально необходимыми средствами, без виртуальных машин ради простого скрипта. Одно из неочевидных отличий в подходах заключается в том, что в первом случае для решения берётся первый попавшийся инструмент, с помощью которого точно знаешь, что сможешь решить задачу, а во-втором – пытаешься выбрать самый лучший подходящий для задачи инструмент среди всех доступных.</p><p>Также к концу года, за время отпуска, нашёл таки время практически закончить экспорт <code>блога</code> из <a href="https://spiiin.livejournal.com/" target="_blank" rel="noopener">ЖЖ</a> на <a href="https://spiiin.github.io/">гитхаб</a>. Долго выбирал <a href="/blog/47121/" title="статический генератор">статический генератор</a>, тему к нему, и изучал языки разметки и описания стилей. Быстро нашёл и пофиксил <a href="https://github.com/spiiin/stuff/tree/master/export_lj" target="_blank" rel="noopener">скрипт экспорта постов из жж</a> в формат markdown. Затем долго чистил совсем бессмысленные посты и экспортировал оставшиеся (часто, с ручными фиксами разметки). В конце думал, оставлять ли что-то в жж, или нет, и решал, что чем меньше там останется контента (как полезного, так и личного), тем лучше.</p><p><img src="/blog/307513906/fox.png" alt="fox"></p><p>За год повзрослел эмоционально, нашёл себя, и снова стал счастливым</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Никогда не подводил итогов года, но почему бы не начать в этом.&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="log" scheme="http://spiiin.github.io/tags/log/"/>
    
  </entry>
  
  <entry>
    <title>Райан Гордон</title>
    <link href="http://spiiin.github.io/blog/413676133/"/>
    <id>http://spiiin.github.io/blog/413676133/</id>
    <published>2021-01-13T21:09:08.000Z</published>
    <updated>2021-01-17T14:37:13.697Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/MeMPCSqQ-34" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><p><a href="https://en.wikipedia.org/wiki/Ryan_C._Gordon" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Ryan_C._Gordon</a></p><p>Хакер, инди-разработчик, фрилансер.</p><p>Портирует “стафф” на линукс и макось. Среди “стаффа” - игры из серий:</p><ul><li>Unreal Tournament</li><li>Serious Sam</li><li>Civilization</li><li>Spider-Man</li><li>Quake</li><li>Left 4 Dead<br>и многие другие, а также приложения Second Life и Google Earth.<br>Проще перечислить, что он не портировал.</li></ul><p><a href="http://icculus.org/" target="_blank" rel="noopener">http://icculus.org/</a> - его сайт с open-source версиями нескольких из старых крупных проектов.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;style&gt;.embed
      
    
    </summary>
    
    
    
      <category term="люди" scheme="http://spiiin.github.io/tags/%D0%BB%D1%8E%D0%B4%D0%B8/"/>
    
  </entry>
  
  <entry>
    <title>ECS для казуальных игр</title>
    <link href="http://spiiin.github.io/blog/1488389622/"/>
    <id>http://spiiin.github.io/blog/1488389622/</id>
    <published>2021-01-07T20:11:49.000Z</published>
    <updated>2021-01-08T16:14:15.423Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Чем может быть полезно применение паттерна <strong><code>Entity Component System</code></strong> в казуальных играх.</p><p>TL,DR:</p><ul><li>Уменьшается связность между классами</li><li>DOD упрощает управление параметрами из нескольких мест</li><li>Упрощается написание читов</li><li>Возможно, игра будет работать быстрее</li></ul><a id="more"></a><h2 id="Уменьшается-связность-между-классами"><a href="#Уменьшается-связность-между-классами" class="headerlink" title="Уменьшается связность между классами"></a>Уменьшается связность между классами</h2><p>Это первое и самое важное, одного этого пункта хватило бы.</p><p>Геймдев не особо богат на архитектурные паттерны. Часто, высший уровень абстракции игровой логики (описание сцены и геймплея) - это классы <strong><code>&quot;поле&quot;</code></strong> (<em>уровень/сцена/зона/whatever</em>), и наследники <strong><code>&quot;игровых объектов&quot;</code></strong>. Часто встречаются ещё какие-нибудь <strong><code>&quot;фабрики эффектов&quot;</code></strong>, содержащиеся методы для запуска всего, чего только можно.</p><p>Первая освещаемая в <a href="/blog/381238762/" title="презентациях по ECS">презентациях по ECS</a>  проблема - это то, что игровых объектов очень много, разных типов, со взаимно-пересекающейся функциональностью.</p><p>К примеру, в <code>RTS</code> это могут быть юниты, герои, здания, ландшафт, снаряды. В <code>match-3</code> - множество отдельных типов клеток, фишек, существующих вне игровых клеток и между клетками механик, бустеры и бонусные фишки. В простом <code>скролл-шутере</code> – игрок, враги, стены и снаряды. В <a href="https://www.gamedevs.org/uploads/data-driven-game-object-system.pdf" target="_blank" rel="noopener">докладе о разработке Dungeon Siege</a> упоминается о &gt;7300 уникальных типов объектов. </p><p>Выстроить такое количество объектов в иерархию наследования практически невозможно, выделить несколько простых базовых классов, от которых наследуются все объекты – тоже. Возможное решение проблемы – выделять не базовые классы, а компоненты, из которых как из кирпичиков будут составлены объекты.</p><p>При таком подходе, судя по различным докладам, в зависимости от игры, может получиться 50-150 компонентов, которыми возможно описать все типы игровых объектов.</p><hr><p>Вторая проблема, более серьёзная с точки зрения архитектуры игры - <strong>куда писать код логики игры?</strong>.<br>Паттерн ECS обещает, что ответ будет чуть более простым, чем при использовании ООП - в системы, отвечающие за необходимый функционал.</p><p>Несколько примеров из одной match-3 игры, в которой используются компоненты для описания игровых фишек, но нет систем.</p><p>Реалзиция механика спецфишки “самолёт” (типа <a href="https://youtu.be/PqF3uKDgLsA?t=412" target="_blank" rel="noopener">такого</a>) в ней выглядит как показано ниже.</p><p>Самолёт запускается методом:<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createAirplaneExplosion</span><span class="params">(airplaneBlock* plane, match3cell* parentCell, <span class="keyword">const</span> explosionSpineSettings&amp; settings)</span></span>;</span><br></pre></td></tr></table></figure></p><p>Сам самолёт состоит из компонентов:<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">airplaneBlock</span> :</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">public</span> customPieceWithVisualFeedback, <span class="comment">//имеет анимацию</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">public</span> customPieceWithCombination,    <span class="comment">//может участвовать в комбинациях</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">public</span> customPieceDestructive,        <span class="comment">//может быть разрушен</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">public</span> customPieceWithObjective,      <span class="comment">//может быть целью уровня</span></span><br><span class="line">    <span class="keyword">virtual</span> <span class="keyword">public</span> customPieceWithDynamicLayer    <span class="comment">//может динамически менять слой</span></span><br><span class="line">    ...                                           <span class="comment">//и т.д.</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//но так же имеет и методы, которые кто-то должен вызывать :(</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">playDestroyAnimation</span><span class="params">(<span class="built_in">std</span>::function&lt;<span class="keyword">void</span>(Event*)&gt; callback)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setHighestLayer</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">restoreLayer</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Соответственно, без использования ECS встаёт вопрос о том, куда дописывать код и где искать проблемы, когда они появляются.</p><p>Один из случаев в этом проекте:</p><p><strong>Иногда самолёты запускаются при старте игры</strong><br>В качестве бонуса игроку на старте. При этом другие бонусы от различных событий или покупок игрока расставляются по полю динамически. Программисту приходит баг от QA, что иногда поле от этого нестабильно (самолеты бьют в те клетки, куда не должны - логика самолётов подразумевает, что они умеют кружить по полю до того момента, пока одна из клеток не станет стабильной, т.е. в ней до момента удара гарантировано не будет происходить других событий). </p><p>Механика игры подразумевает, что можно заблокировать клетку от удара самолёта через метод <code>match3cell-&gt;lock</code>, но куда вставить его вызов?</p><ul><li>в коде <code>createAirplaneExplosion</code>?</li><li>в коде самого <code>airplaneBlock</code>? (тогда он будет знать о существовании всего поля и клеток на нём)</li><li>в коде событий, добавляющих на поле бустеры?</li><li>добавить компонент особой блокировки в класс клетку match3cell?</li><li>Программист, которому прилетел баг, пошёл ещё дальше, и добавил блокировку в код туториала на старте уровня %).</li></ul><p>В подходе с ECS, код, по идее, должен был бы выглядеть понятнее:<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateSystems</span><span class="params">(<span class="keyword">float</span> dt)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">createPreboosterAirplaneSystem(dt);  <span class="comment">//выставить компонент блокировки клеток поля на старте полёта самолётов</span></span><br><span class="line">createOtherPreboostersSystem(dt);  <span class="comment">//обновить логику всех бонусов игрока, отработки которых нужно дождаться</span></span><br><span class="line">normalGamePlayLogic(dt);         <span class="comment">//обычная геймплейная логика, </span></span><br><span class="line">         <span class="comment">//включает в себя обновление самолётов:</span></span><br><span class="line">         <span class="comment">//"если нет блокировки, ударить по клетке, иначе  - продолжать летать над полем"</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Т.е. на вопрос <strong><code>&quot;куда дописать логику блокировки клеток от удара самолётами-пребустерами&quot;</code></strong> следует очевидный ответ <strong><code>&quot;в систему создания блокировки от удара самолётами-пребустерами&quot;</code></strong>, вместо распутывания ада взаимных вызовов и колбеков между полем, клеткой, самолётом, суперклассом запуска всех событий или ещё какими-нибудь объектами, и медитации на тему, какой из объектов более отвечает за это.</p><p>Поиск по коду суперкласса запуска всех событий даёт 25 мест, в которых клетка может быть заблокирована или разблокирована обратно %). Гораздо лучше было бы иметь 4-5 систем, которые выбирают все сущности с компонентами блокировки и удаляют эти компоненты или создают их.</p><hr><p>Одна из фишек архитектуры ECS - возможность отследить связи между системами и компонентами - <a href="https://youtu.be/W3aieHjyNvw?t=324" target="_blank" rel="noopener">пример в докладе Тимоти Форда по Overwatch</a>. Я попробовал перевести на ECS (с использованием библиотеки EnTT) готовую игру - сделанный за день для хакатона <a href="https://apps.apple.com/ru/app/comatosis/id1537791573#?platform=ipad" target="_blank" rel="noopener">небольшой shoot-them-up</a> на закрытом движке, использующем Component Systems. Заменил часть, отвечающую за апдейт на системы, и оставил без изменений систему рендера (она использует Scene Graph).</p><p>На мой взгляд, небольшие игры с хакатонов хорошо подходят для подобных тестов - бардак в коде, вызванный нехваткой времени сделать “как правильно”, реалистично симулирует состояние кода игры после длительного периода разработки, а небольшой объём кода позволяет довести задуманное до конца.</p><p>Для визуализации связей сделал такой скрипт на питоне:<br><a href="https://gist.github.com/spiiin/c70c3bf0711fd952d48e505ead7bffe5" target="_blank" rel="noopener">https://gist.github.com/spiiin/c70c3bf0711fd952d48e505ead7bffe5</a><br><img src="/blog/1488389622/diagram1.png" alt="ecs-doc"></p><p>Кашу из зависимостей между игровыми классами удалось превратить в 24 системы и 30 компонентов. При этом большинство систем использует 2-4 компонента, большинство компонентов используется 1-2-3 системами. Большая часть систем может быть без особых усилий переделана на <code>реактивные</code> (чтобы вызывать их не каждый кадр, а по колбекам на изменение каких-либо компонент на любой из сущностей) или на <code>владеющие компонентами</code> (для оптимизации по скорости обходов, <a href="https://skypjack.github.io/2019-04-12-entt-tips-and-tricks-part-1/" target="_blank" rel="noopener">статья с объяснением</a>).</p><p>Компоненты по способы использования разделяются на <code>логические</code> (для композиции из них сущностей - в основном, игровых объектов), <code>события</code> (для передачи информации между системами и выделения сущностей, с которыми произошло действие), <code>синглтоны</code> (существующие в единственном экземпляре для всего пула сущностей), и <code>прокси-компоненты</code> (для передачи данных в подсистемы движка/игры, написанные без ecs, и получения данных из этих подсистем).</p><h2 id="DOD-упрощает-управление-параметрами-из-нескольких-мест"><a href="#DOD-упрощает-управление-параметрами-из-нескольких-мест" class="headerlink" title="DOD упрощает управление параметрами из нескольких мест"></a>DOD упрощает управление параметрами из нескольких мест</h2><p>Простейший пример -<strong> <code>возможность удаления игрового объекта из нескольких разных мест</code></strong>.<br>Игровой снаряд может быть уничтожен через 5 секунд по окончании времени жизни, либо при столкновениях во стеной или врагом, то удаление в ООП парадигме может выглядеть так:</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> bullet = createBullet();</span><br><span class="line"><span class="keyword">auto</span> waitAction = createWaitAction(<span class="number">5.0f</span>); <span class="comment">//создаём объект действия ожидания</span></span><br><span class="line"><span class="comment">//в конце действия уничтожаем объект</span></span><br><span class="line">waitAction.onEnd = [bullet]() &#123;</span><br><span class="line">    <span class="comment">//тут не забыть проверить, что за 5 секунд объект может быть уничтожен кем-либо ещё</span></span><br><span class="line">    bullet-&gt;destroySelf();</span><br><span class="line">&#125;;</span><br><span class="line">bullet-&gt;addAction(waitAction); <span class="comment">//добавляем действие на объект пули</span></span><br></pre></td></tr></table></figure><p>Как проверить, что пуля не была уничтожена?<br>Один из способ из стандартной библиотеки с++ – использование слабого указателя на объект. Такие проверки необходимо добавлять в каждое асинхронное действие.</p><p>Другой подход - перепроверять, жив ли объект в текущий момент, через глобальный менеджер объектов. Более детально про организацию этого в игровых движках - <a href="https://floooh.github.io/2018/06/17/handles-vs-pointers.html" target="_blank" rel="noopener">статья Andre Weissflog</a>. В этом случае хендлер объекта часто представлен в виде пары <strong><code>(индекс объекта в массиве, номер поколения)</code></strong>. Использование номера поколения позволяет избежать случайного обращения к уже удалённому объекту при размещении на месте удалённого объекта следующего созданного.</p><p>Если решать проблему с использованием ECS-подхода, решение может быть таким: система обновления жизни пули (и других объектов с компонентом <code>lifetimeComponent</code>) читает компонент таймера жизни и уменьшают его. В случае если таймер дошёл до нуля - система просто добавляет на сущность компонент-событие <code>removeNodeComponent</code> - маркер, что в конце кадра сущность должна быть уничтожена.</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateLifetimeSystem</span><span class="params">(<span class="keyword">float</span> delta)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//read components </span></span><br><span class="line">    <span class="comment">// &lt;------------------------------------------------(0)</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lifetimeView = ECS().view&lt;nodeComponent, lifetimeComponent&gt;(entt::exclude&lt;removeNodeComponent&gt;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//logic</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> [entity, nodeComponent, lifetimeComp] : lifetimeView.each()) &#123;</span><br><span class="line">        lifetimeComp.lifetime -= delta;</span><br><span class="line">        <span class="keyword">if</span> (lifetimeComp.lifetime &lt;= <span class="number">0.0f</span>) &#123;</span><br><span class="line">            <span class="keyword">auto</span> action = MEActionFactory::changeAlphaAction(<span class="number">0.0f</span>, lifetimeComp.fadeinTime);</span><br><span class="line">            action-&gt;onEnd = [entity=entity](MENode* node) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ECS().valid(entity)) &#123;  <span class="comment">//&lt;-------  (1)</span></span><br><span class="line">                    ECS().emplace_or_replace&lt;removeNodeComponent&gt;(entity);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (!nodeComponent.dead) &#123;      <span class="comment">//&lt;-------- (2)</span></span><br><span class="line">                nodeComponent.node-&gt;addAction(action);</span><br><span class="line">                ECS().<span class="built_in">remove</span>&lt;lifetimeComponent&gt;(entity);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(0) - выборка всех сущностей, у которых есть компоненты <code>nodeComponent</code> (визуальное отображение), <code>lifetimeComponent</code> (время жизни), но нет компонента <code>removeNodeComponent</code> (умирает)<br>(1) - так как используется отложенное действие - нужно проверить, что сущность ещё жива и не была уничтожена (проверка через менеджер) - <code>ECS().valid</code><br>(2) - компонент для хранения не владеющего указателя, имеет кроме указателя флаг <code>nodeComponent.dead</code> , показывающий не был ли уничтожен объект, вместо использования weak_ptr/intrusive_ptr. Вместо флага может быть использован счётчик, если нужно shared-владение.</p><hr><p>Другой пример - есть стратегия с игровым полем с персонажами на нём, и по желаниям гейм-дизайнеров, персонажи на этом поле должны плавно исчезать при открытии окна режима редактирования зданий или появления немодального игрового окна (и соответственно, плавно появляться обратно при закрытии этих режимов). Появление персонажей не мгновенно, и игроки могут успеть за это время запустить исчезновение обратно. <strong><code>Как добиться того, чтобы появление/исчезновение персонажей работало корректно в этом случае?</code></strong></p><p>В <code>ООП-подходе</code> каждое из действие появления напрямую должно попытаться влезть в другие действия, навешенные на персонажа, и узнать, нет ли на нём действий исчезновения и как-то обработать ситуацию, если персонажи одновременно появляются и исчезают.</p><p>С <code>ECS-подходом</code> - можно выделить два различных компонента исчезновения и появления персонажа, и различные системы для работы с ними. Одной из идиом работы совместной работы таких систем является непосредственное применение сайд-эффектов в одном месте (сайд-эффект в этом случае - это непосредственное изменение альфа-компонента цвета для рендер-системы). <a href="https://youtu.be/W3aieHjyNvw?t=1062" target="_blank" rel="noopener">Объяснение причин в докладе по Overwatch</a> - если системы A, B, C как-либо меняют логическое состояние компонента, то лучше собрать их действие в отдельном компоненте для системы D, которые непосредственно применит все собранные изменения в одном месте.</p><p>Так формула рассчёта альфа компонента персонажа будет находиться в одном месте и её можно будет изменить по желанию гейм-дизайнеров. Например, можно будет настроить поведение в таком случае одновременного появления и исчезновения персонажа - выстроить ли эти действия в цепочку, мгновенно завершить действие, которое было начато раньше, или же настроить таймеры действия так, чтобы они доигрались быстрее.</p><h2 id="Упрощается-написание-читов"><a href="#Упрощается-написание-читов" class="headerlink" title="Упрощается написание читов"></a>Упрощается написание читов</h2><p>Не секрет, что при разработке игр редко заморачиваются с покрытием кода тестами, поэтому часто читы - это средство создания сложных сценариев проверки игры, так что они становятся настолько важными, насколько важно вообще провести QA-проверку игры.</p><p>ECS подход должен помочь:</p><p><strong><code>- Легко включать и отключать каждую отдельную систему через читы</code></strong><br>Лучше даже, группу систем, отвечающую за определённую логику.</p><p>Отключение системы может само по себе быть удобным готовым читом, который при ООП подходе необходимо создавать дополнительно к основной логике (отключение системы получения урона, отключение системы коллизий, отключение ИИ).</p><p>При проектировании объектов редко задумываются о том, чтобы частично отключать функционал класса. С системами, вызов которых сгруппирован в одном месте, это может быть сильно проще.</p><p><strong><code>- Проще сделать загрузку/сохранение сцены, проигрывание повторов</code></strong><br>Сохранение - это просто сериализация всех сущностей со всеми компонентами. Если после этого запустить все системы - логика игры должна начать работать также, как если бы состояние сущностей/компонент было получено любым другим образом.</p><p><strong><code>- Проще составить сценарии тестирования</code></strong><br>Включение/отключение систем может быть сериализовано или включено в запись повтора, результаты работы после нескольких циклов могут быть сериализованы и сверены с эталонным результатом.</p><h2 id="Возможно-игра-будет-работать-быстрее"><a href="#Возможно-игра-будет-работать-быстрее" class="headerlink" title="Возможно, игра будет работать быстрее"></a>Возможно, игра будет работать быстрее</h2><p>(не проверял, пересказ чужих докладов)</p><p><strong><code>- Проще запустить системы, несвязанные с другими, в отдельном потоке</code></strong><br>Если отслеживать граф зависимостей компонентов, с которыми работают системы, то можно найти системы, которые могут работать параллельно с другими. С обычным ООП подходом сложно перенести часть логики в отдельный поток.</p><p><strong><code>- Прирост скорости за счёт более быстрого обхода и чтения из кеша</code></strong><br>Компоненты хранятся в памяти отдельными массивами, однако можно добиться того, чтобы ECS хранила контейнер для каждой группы сущностей с определённой группой компонент в памяти последовательно.</p><p>Для ECS на архетипах это делается по умолчанию (при создании или удалении компонента для сущности, они будет перенесена в другой контейнер).</p><p>Для ECS на разреженных множествах также существуют способы организовать хранение сущностей с одинаковыми компонентами в памяти последовательно. Для EnTT - это группы (<code>group</code>) - <a href="https://github.com/abeimler/ecs_benchmark" target="_blank" rel="noopener">синтетические бенчмарки</a> показывают, что это наиболее быстрый способ работы.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Чем может быть полезно применение паттерна &lt;strong&gt;&lt;code&gt;Entity Component System&lt;/code&gt;&lt;/strong&gt; в казуальных играх.&lt;/p&gt;
&lt;p&gt;TL,DR:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Уменьшается связность между классами&lt;/li&gt;
&lt;li&gt;DOD упрощает управление параметрами из нескольких мест&lt;/li&gt;
&lt;li&gt;Упрощается написание читов&lt;/li&gt;
&lt;li&gt;Возможно, игра будет работать быстрее&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="gamedev" scheme="http://spiiin.github.io/tags/gamedev/"/>
    
  </entry>
  
  <entry>
    <title>ECS. Ссылки</title>
    <link href="http://spiiin.github.io/blog/381238762/"/>
    <id>http://spiiin.github.io/blog/381238762/</id>
    <published>2021-01-04T22:09:45.000Z</published>
    <updated>2021-01-09T11:44:58.100Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>ECS - паттерн программирования, используемый в геймдеве. Основная идея - есть пул сущностей (<code>entities</code>), на которые можно добавлять компоненты (данные без логики - <code>components</code>). Сущности и компоненты читаются, модифицируются, создаются и удаляются только с помощью систем(<code>systems</code>). Подход немного отличен от традционного ООП, и от ECs (сущности разбиваются на  компоненты - логика хранится как в классах-сущностях, так и в компонентах), так что требует ознакомления и практики перед использованием<br><a id="more"></a></p><h2 id="История-и-примеры-практического-применения-в-больших-играх"><a href="#История-и-примеры-практического-применения-в-больших-играх" class="headerlink" title="История и примеры практического применения в больших играх"></a>История и примеры практического применения в больших играх</h2><p><code>Dungeon Siege</code> - <a href="https://www.gamedevs.org/uploads/data-driven-game-object-system.pdf" target="_blank" rel="noopener">A Data-Driven Game Object System</a><br><code>Operation Flashpoint 2</code><br><code>GrexEngine</code> (движок для mmo-rpg) - <a href="http://t-machine.org/index.php/2007/09/03/entity-systems-are-the-future-of-mmog-development-part-1/" target="_blank" rel="noopener">Cерия статей</a>, и ссылка ещё на одну презу из dungeon siege<br><code>World of Tanks Blitz</code> - <a href="https://habr.com/ru/company/wargaming/blog/245321/" target="_blank" rel="noopener">Создание World of Tanks Blitz на базе собственного движка DAVA</a><br><code>Wooga</code> (немецкая студия, разрабатывает казуалки) - для матч-3 и стратегии. Ссылки на видео в следующем разделе.<br><code>Overwatch</code> - Ссылка на видео в следующем разделе (в комментариях к ютуб лекции ещё несколько разработчиков игр отписывались, например <code>Mercenaries 2</code>)<br><code>Minecraft</code> - Использует библиотеку <a href="https://minecraft.net/en-us/attribution/" target="_blank" rel="noopener">entt</a>.</p><h2 id="Видео-презентации"><a href="#Видео-презентации" class="headerlink" title="Видео презентации"></a>Видео презентации</h2><p><code>Entitas - Entity System Architecture with Unity - Unite Europe 2015.</code><br>Доклад от Макса Закса и Саймона Шмидта о библиотеке Entitas для Unity - идеи, и как совмещать объектами Unity.<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/1wvMXur19M4" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><code>Unite Europe 2016 - ECS architecture with Unity by example</code><br>От них же, практическое применение библиотеки Entitas для решения конкретной задачи, создания интерфейса в стиле Clash Royale.<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/lNTaC-JWmdI" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><code>Кирилл Надеждин (Kumo Kairo) - ECS в разработке игр — хорошая архитектура приложений для всех</code><br>Обзор entitas и ссылки на другие примеры использования ECS в играх, на русском. Примеры проблем, которые приводят к тому, чтобы перейти на ECS.<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/pp5sYybOidg" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><code>Wargaming.net: Архитектура современных 3D движков (DevGAMM Minsk 2014)</code><br>Архитектура современных 3D движков, Виталий Бородовский, Technical Director WoT Blitz<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/1zLqgQ_-F84" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><code>Overwatch Gameplay Architecture and Netcode</code><br>Разбирается внутренняя ECS близзрад. Cамая объёмная и сложная для понимания презентация, тут на 0.75 лучше смотреть. Почему пришли к применению ECS, с какими проблемами сталкивались и как их решали. Обзор после 3х лет использования такой архитектуры на практике.<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/W3aieHjyNvw" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><p><code>itCppCon19 - ECS back and forth (Michele Caini)</code><br>Обзор внутреннего устройства ECS на C++ - разбор двух типов архитектур - на основе “архетипов” и “разреженных множеств”. Можно также почитать в ECS-FAQ (ссылка в следующем разделе)<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/WB5bRKKGRUk" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><h2 id="Обзоры-библиотек"><a href="#Обзоры-библиотек" class="headerlink" title="Обзоры библиотек"></a>Обзоры библиотек</h2><p><a href="https://github.com/SanderMertens/ecs-faq" target="_blank" rel="noopener">Entity Component System FAQ</a> - общий обзор подхода, терминология, список библиотек, примеры применения в продакшене.<br><a href="https://github.com/abeimler/ecs_benchmark" target="_blank" rel="noopener">Entity-Component-Systems Benchmark</a> - бенчмарк различных библиотек<br><a href="https://github.com/skypjack/entt" target="_blank" rel="noopener">EnTT</a> - production-ready c++ библиотека, с примерами использования (самый простой - <a href="https://github.com/Kerndog73/EnTT-Pacman" target="_blank" rel="noopener">pacman</a>, <a href="https://github.com/skypjack/entt/wiki/EnTT-in-Action" target="_blank" rel="noopener">документацией</a> и <a href="https://skypjack.github.io/tags/#entt" target="_blank" rel="noopener">блогом</a><br><a href="https://github.com/SanderMertens/flecs" target="_blank" rel="noopener">flecs</a> - c/c++ библиотека с большим количеством <a href="https://github.com/SanderMertens/flecs/tree/master/examples" target="_blank" rel="noopener">примеров</a> и функционала (есть модули для сериализации, рефлексии, продвинутое api для обращения с сущностями). <a href="https://github.com/SanderMertens/flecs/blob/master/docs/Manual.md" target="_blank" rel="noopener">Мануал</a><br><a href="https://github.com/sschmid/Entitas-CSharp" target="_blank" rel="noopener">Entitas</a> - библиотека на C# для использования с Unity (порты на другие языки можно не смотреть. Возможно, стоит смотреть сразу штатный ECS для Unity - Unity DOTS.</p><h2 id="Ссылки"><a href="#Ссылки" class="headerlink" title="Ссылки"></a>Ссылки</h2><p><a href="https://gamedev.ru/code/forum/?id=198194&amp;m=3785006#m8" target="_blank" rel="noopener">Обсуждение на gamedev.ru</a> - пост с большой коллекцией ссылок<br><a href="http://entity-systems.wikidot.com/" target="_blank" rel="noopener">Entity Systems Wiki</a> - вики с терминологией, ссылками, список библиотек для разных языков.</p><h2 id="Data-oriented-Design-DoD"><a href="#Data-oriented-Design-DoD" class="headerlink" title="Data-oriented Design (DoD)"></a>Data-oriented Design (DoD)</h2><p>Теория, если сходу не очень понятны идеи ECS.<br><a href="https://www.dataorienteddesign.com/dodbook/" target="_blank" rel="noopener">Data-Oriented Design</a> - фундаментальная книжка по DoD от Richard Fabian<br><a href="https://github.com/dbartolini/data-oriented-design" target="_blank" rel="noopener">Data Oriented Design Resources</a> - список материалов по DOD<br><a href="https://habr.com/ru/post/472052/" target="_blank" rel="noopener">Data-Oriented Design (или почему, используя ООП, вы, возможно, стреляете себе в ногу)</a> - перевод статьи Noel Llopis<br><a href="https://asawicki.info/news_1422_data-oriented_design_-_links_and_thoughts.html" target="_blank" rel="noopener">Data-Oriented Design - Links and Thoughts</a> - коллекция ссылок на статьи, многие gamedev-related.<br><a href="https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/introduction-to-data-oriented-design.pdf" target="_blank" rel="noopener">DOD в Battlefield</a> - исследование прироста скорости от правильного расположения структур в памяти, полезные ссылки в конце доклада</p><p>Примеры проектов, используещие подход:<br><a href="https://github.com/ocornut/imgui" target="_blank" rel="noopener">Dear ImGui</a><br><a href="https://github.com/bkaradzic/bgfx" target="_blank" rel="noopener">bgfx</a></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ECS - паттерн программирования, используемый в геймдеве. Основная идея - есть пул сущностей (&lt;code&gt;entities&lt;/code&gt;), на которые можно добавлять компоненты (данные без логики - &lt;code&gt;components&lt;/code&gt;). Сущности и компоненты читаются, модифицируются, создаются и удаляются только с помощью систем(&lt;code&gt;systems&lt;/code&gt;). Подход немного отличен от традционного ООП, и от ECs (сущности разбиваются на  компоненты - логика хранится как в классах-сущностях, так и в компонентах), так что требует ознакомления и практики перед использованием&lt;br&gt;
    
    </summary>
    
    
    
      <category term="c++" scheme="http://spiiin.github.io/tags/c/"/>
    
      <category term="link" scheme="http://spiiin.github.io/tags/link/"/>
    
      <category term="c#" scheme="http://spiiin.github.io/tags/c/"/>
    
      <category term="code" scheme="http://spiiin.github.io/tags/code/"/>
    
      <category term="gamedev" scheme="http://spiiin.github.io/tags/gamedev/"/>
    
  </entry>
  
  <entry>
    <title>Уровень программирования: Middle</title>
    <link href="http://spiiin.github.io/blog/15798/"/>
    <id>http://spiiin.github.io/blog/15798/</id>
    <published>2020-08-12T08:58:00.000Z</published>
    <updated>2021-01-02T22:01:36.573Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Часто встречающиеся у программистов-новичков ошибки и часто встречающие у опытных программистов ошибки. С позиции “среднего” разработчика.<br><a id="more"></a></p><p>…</p><hr><h2 id="Ошибки-новичков"><a href="#Ошибки-новичков" class="headerlink" title="Ошибки новичков"></a>Ошибки новичков</h2><p><code>1. Использование примитивов вместо высокоуровневых абстракций</code></p><p>Новички часто пишут код “с нуля”, забывая о возможностях используемых фреймворков или библиотек. Фактически это просто неумение работать со сложными типами и игнорирование возможностей системы типов используемого языка (точнее даже - возможностей выражать через типы ограничения и связи сущностей).</p><blockquote><p>Каждый раз, когда необходимо завести переменную типа <code>int</code> - подумайте, действительно ли нужен просто целочисленный тип, или же с помощью типа можно сказать ещё что-то полезное о переменной</p></blockquote><p><code>2. Реализация всей логики в одной функции</code></p><p>Если какой-то кусок кода можно вынести в именованную функцию (даже если она не будет использоваться повторно), стоит так сделать. Функции проще объединять в классы или модули, чем “голый” код и разрастающиеся безымянные функции. Это нужно, чтобы уменьшить вероятность копи-пасты кода (точнее даже, уменьшения количества необходимых для изменения логики мест в коде).</p><blockquote><p>Можно ли описать одним небольшим предложением, что делает функция? Что делает класс? Что описано в файле/namespace/модуле?</p></blockquote><p><code>3. Игнорирование инкапсуляции</code></p><p>Инкапсуляция часто ошибочно трактуется новичками как необходимость делать все данные класса закрытыми. На практике лучше понимать и использовать её как средство сделать объект не ломаемым пользователем. Т.е. если изменение переменных не может привести к тому, что класс будет находиться в невалидном состоянии - то и не надо их прятать. Если же для корректной работы с объектом у него нужно вызвать 5 разных методов в строго определенном порядке (а в других случаях программа падает), значит, нет у него никакой инкапсуляции. Пользователь объекта не должен помнить о том, что нельзя делать с объектов, чтобы не сломать его внутреннюю логику - сам объект должен быть не ломаемым для пользователя.</p><blockquote><p>Таким образом в некоторых языках отказываются “ломающихся” абстракций и возможностей (<code>goto</code>, отказ от указателей, отказ от ручного освобождения памяти, отказ от мутабельности).</p></blockquote><p><code>4. Персональный стиль</code></p><p>По большей части, все программы пишутся несколькими людьми, так что вместо того, что писать в строго выработанном правильном стиле, стоит учиться подстраиваться под стиль уже написанного кода. Код на некоторых языках имеет стандартные правила написания, но даже с учётом этого необходимо помнить, что программа могла писаться, когда в ходу были другие правила, или же по каким-либо другим причинам использовать другой подход. Стоит писать так, чтобы стиль всей программы был одинаковый - так у читающего код будет меньше вопросов, почему в разных местах программы используются разные варианты (и какой стиль выбрать при изменении кода).</p><blockquote><p>Прежде чем писать код, прочитайте уже написанный</p></blockquote><p><code>5. Неправильные вопросы опытным программистам</code></p><p><em>“Какой язык учить?”</em> - неверно, опытные скорее могут рассказать, что уже учить не стоит. Новые знания можно копать самим, в больших количествах.<br><em>“Как быстро получить прибавку к зарплате”</em> - неверно. Самый быстрый способ прокачки - менять работу каждые полгода-год, с повышением рангов. Но с определенного уровня начинают ценить лояльность, прыгающий между проектами профессионал стоит только того, чтобы выжать из него максимум и отпустить дальше. В компаниях с грамотным управлениям вашу работу и так отметят (если отметка соответствует ожиданиям - всё отлично, если нет - лучше уточнять, что не так). К счастью, обычно с определённого уровня программистам достаточно денег для того, чтобы хватало на жизнь (дойти до этого уровня можно за год-два-три - как повезёт).</p><p>Стоит максимально вникать в предметную область, опасно зависать на несколько лет в очень узкой нише.</p><blockquote><p>Полезно раз в месяц-два изучать как минимум одну статью профессиональной тематики, раз в полгода-год читать книгу, раз в 2-3 месяца изучать библиотеки/фреймворки/движки, похожие на те, что используются в работе.</p></blockquote><h2 id="Ошибки-опытных"><a href="#Ошибки-опытных" class="headerlink" title="Ошибки опытных"></a>Ошибки опытных</h2><p><code>1. Нежелание трогать плохой код</code></p><p>“Это надо разбираться с половиной программы” - нормальная с точки зрения опытного программиста отмазка, чтобы не выполнять рефакторинг кода. В запущенных случаях это даже перерастает в нежелание трогать свой плохой код.</p><blockquote><p>Иногда таки надо разобраться с половиной программы, чтобы сделать код лучше. На костылях далеко не уёдешь, рано или поздно предстоит выбросить их и сделать нормальные колёса.</p></blockquote><p><code>2. Нежелание отказываться от своих подходов</code></p><p>Иногда (редко но бывает), нужно сделать свой код хуже, чтобы он вписывался в проект. Иногда нужно выучить новую парадигму - очень сильно неприятно, когда ты 15-20 лет писал код и решал проблемы в одном стиле, а теперь их в проекте решают по другому, так как ты ещё не умеешь. Иногда нужно выучить новый язык, когда уже очень хорошо знаешь старый.</p><p>Грустно, но во многих компаниях уровни роста программиста - это скорее стаж, чем реальный опыт, а с учётом того, что в IT практически никогда не понижают при переходе между компаниями, оказывается также, что умение писать хороший код приходит (если вообще приходит)  где-то на уровне “senior+”.</p><blockquote><p>Время движется вперёд, и любые идеи могут устареть, даже те, которые ты считаешь основополагающими. Нужно не забывать их переоценивать</p></blockquote><p><code>3. Игнорирование soft-skills</code></p><p>Рано или поздно в ходе роста программиста необходимо научиться нормально взаимодействовать с командой. На начальных этапах всё взаимодействие - это передача по конвейеру: получение задач от лидов/тм, передача выполненного к QA. </p><p>Но на более поздних необходимо взаимодействие со всеми вокруг - уточнение формулировки задач (и умение исправить или даже переделать постановку исходной задачи), корректировки сроков. Ещё позднее - формирование команды и умение улаживать конфликты в команде. Даже если ты собираешься расти в “техническую”, а не “управленческую” сторону, всё равно не избежать растущего количества взаимодействия, а умение взаимодействовать тоже нужно прокачивать.</p><p>В некоторых компаниях отрицательный отзыв по софт-скиллам блокирует твой карьерный рост.</p><blockquote><p>В любой сфере достаточно людей, которые умеют программировать, но не хватает тех, которые умеют программировать, и при этом разбираются в предметной области.</p></blockquote><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Часто встречающиеся у программистов-новичков ошибки и часто встречающие у опытных программистов ошибки. С позиции “среднего” разработчика.&lt;br&gt;
    
    </summary>
    
    
    
      <category term="code" scheme="http://spiiin.github.io/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>Карта прохождения игр</title>
    <link href="http://spiiin.github.io/blog/1563/"/>
    <id>http://spiiin.github.io/blog/1563/</id>
    <published>2020-08-04T19:11:37.000Z</published>
    <updated>2020-09-01T18:10:28.493Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Список игр на прохождение<br><a id="more"></a></p><h2 id="Current-list"><a href="#Current-list" class="headerlink" title="Current list"></a>Current list</h2><p><code>Captain Toad</code> - 90%<br><code>Age of Mythologies</code> - 50%<br><code>Gta 5</code> - 30%<br><code>The Witcher 2</code> - 5%</p><h2 id="Coop"><a href="#Coop" class="headerlink" title="Coop"></a>Coop</h2><p><code>The Stratchers</code> - 33%<br><code>Trine 4</code> - 30%<br><code>Minecraft</code> - 5%</p><h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h2><p><code>Yoshi&#39;s Crafted World</code><br><code>The Forest</code></p><h2 id="Completed"><a href="#Completed" class="headerlink" title="Completed"></a>Completed</h2><p><code>Mario+Rabbids</code><br><code>Witcher</code><br><code>Legend of Zelda: BotW</code><br><code>Warhammer 40k: Mechanicus</code></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Список игр на прохождение&lt;br&gt;
    
    </summary>
    
    
    
      <category term="games" scheme="http://spiiin.github.io/tags/games/"/>
    
  </entry>
  
  <entry>
    <title>Привет, Hexo</title>
    <link href="http://spiiin.github.io/blog/47121/"/>
    <id>http://spiiin.github.io/blog/47121/</id>
    <published>2020-07-18T14:14:53.000Z</published>
    <updated>2020-09-15T15:24:43.416Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>После нескольких дней возни в очередной попытке собрать на <code>jekyll</code> статический блог, решил забить на него и попробовать использовать для блога <a href="https://hexo.io/" target="_blank" rel="noopener">hexo</a>. Получилось сильно проще и приятнее.</p><p>Во-первых, <code>hexo</code> запускается легче, и темы работают сходу. И, что удобно для блога программисту, подсветка синтаксиса кода интегрирована в движок лучше, из чего следует, что темы скорее всего будут совместимы с ней (у <code>jekyll</code> подобрать работающую пару “тема+плагин подсветки синтаксиса” оказалось очень непросто, то съезжала нумерация длинных строк, то весь блок с кодом выглядел коряво, то были проблемы с корректным отображения цвета строк или фона)</p><a id="more"></a><p>Единственное, для корректной работы тем, иногда опытным путём, необходимо выяснить, какие плагины необходимо доустановить из <a href="https://hexo.io/plugins/" target="_blank" rel="noopener">списка</a>.</p><h2 id="Темы"><a href="#Темы" class="headerlink" title="Темы"></a>Темы</h2><p>Далее, выбор <a href="https://hexo.io/themes/" target="_blank" rel="noopener">тем</a>. Достаточно много качественных и приятных глазу, из тёмных и минималистичных интересными показались:</p><ul><li><a href="https://github.com/howardliu-cn/hexo-theme-clean-dark" target="_blank" rel="noopener">clean-dark</a><ul><li><a href="https://www.howardliu.cn/" target="_blank" rel="noopener">Пример</a></li><li>Оригинальная <a href="http://pavelmakhov.com/jekyll-clean-dark" target="_blank" rel="noopener">тема для jekyll</a>, которая была взята в качестве основы для этой темы</li></ul></li><li><a href="https://github.com/maochunguang/black-blue" target="_blank" rel="noopener">black-blue</a><ul><li><a href="http://maochunguang.github.io/" target="_blank" rel="noopener">Пример</a></li></ul></li><li><a href="https://github.com/tzvetkov75/solar-theme-hexo/" target="_blank" rel="noopener">solar</a><ul><li><a href="https://tzvetkov75.github.io/demo_blog/public/" target="_blank" rel="noopener">Пример</a>.</li><li>Тема на основе <a href="https://probberechts.github.io/hexo-theme-cactus/cactus-dark/public/" target="_blank" rel="noopener">cactus</a></li></ul></li><li><a href="https://github.com/lyndonoc/hexo-theme-pandollo" target="_blank" rel="noopener">pandollo</a><ul><li><a href="https://lyndonoc.github.io/" target="_blank" rel="noopener">Пример</a></li></ul></li></ul><h2 id="Настройка-темы"><a href="#Настройка-темы" class="headerlink" title="Настройка темы"></a>Настройка темы</h2><p>Минимальная настройка темы включает правку файла <code>config.yml</code>, какие именно настройки поддерживаются, обычно написано на сайте темы.</p><p>Дополнительно, на примере темы <code>pandolo</code> - можно донастроить стиль, разобравшись с правкой файлов в папке <code>themes/pandollo/source/scss</code>.</p><p>Дальше нужно выполнить команду:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sass --style&#x3D;compressed .&#x2F;main.scss ..&#x2F;css&#x2F;main.css</span><br></pre></td></tr></table></figure></p><p>Для того, чтобы сгенерировать упакованную версию файла стилей, которую будет использовать блог.</p><p>После небольших правок получилась примерно такая “лисья” тема:<br><img src="/blog/47121/hexo-fox.png" alt="hexo-fox"></p><h2 id="Настройка-плагинов"><a href="#Настройка-плагинов" class="headerlink" title="Настройка плагинов"></a>Настройка плагинов</h2><p>Для выбранной темы пригодятся следующие плагины:<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "hexo-asset-link": "^2.0.1",</span><br><span class="line">  "hexo-generator-fragments": "^1.0.0",</span><br><span class="line">  "hexo-renderer-kramed": "^0.1.4",</span><br><span class="line">  "hexo-renderer-jade": "^0.5.0",</span><br><span class="line">  "hexo-abbrlink": "^2.2.1",</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/liolok/hexo-asset-link" target="_blank" rel="noopener">hexo-asset-link</a> - позволяет использовать в постах ссылку на ассет в виде относительного пути: <code>POST_NAME/asset_name.png</code> (также нужно включить в <code>config.yml</code> опцию: <code>post_asset_folder: true</code>, чтобы hexo создавал отдельную папку для ассетов к каждому посту).</p><p><a href="https://github.com/mamboer/hexo-generator-fragments" target="_blank" rel="noopener">hexo-generator-fragments</a> - необходим для темы - генерирует preview для постов для главной страницы, позволяет использоватьв в постах тег <code>&lt;!-- more --&gt;</code> чтобы отмечать краткую короткую preview-версию поста.</p><p><a href="https://github.com/sun11/hexo-renderer-kramed" target="_blank" rel="noopener">hexo-renderer-kramed</a> - плагины, содержащие в названии renderer, позволяют hexo генерировать посты из разных форматов файла. Данный плагин используется для рендера из файлов <code>*.md</code> в формате <code>github flavored markdown</code>, который используется на серверах <code>github</code>.<br>В комплекте с <code>hexo</code> уже идёт плагин, который рендерит markdown-файлы, поэтому чтобы использовать альтернативный, предварительно нужно его удалить:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm uninstall hexo-renderer-marked --save</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/hexojs/hexo-renderer-jade" target="_blank" rel="noopener">hexo-renderer-jade</a> - необходимый для темы плагин, позволяющий рендерить pug-файлы (собственно, сама тема описана в этом формате).</p><p><a href="https://github.com/Rozbo/hexo-abbrlink" target="_blank" rel="noopener">hexo-abbrlink</a> - генерирует для каждого поста идентификатор. Для генерации имён постов необходимо в <code>config.yml</code> добавить строку:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">permalink: posts&#x2F;:abbrlink&#x2F;</span><br></pre></td></tr></table></figure><br>Для того, чтобы указать ссылку на пост, нужно использовать тег:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Написание-постов"><a href="#Написание-постов" class="headerlink" title="Написание постов"></a>Написание постов</h2><p>После установки и настройки темы можно попробовать добавить пост:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new post hello-hexo.md</span><br></pre></td></tr></table></figure><br>Вместо md можно попробовать использовать другие форматы, для которых установлены render-плагины. В качестве редактора постов я бы посоветовал использовать (Visual Studio Code)[<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">https://code.visualstudio.com/</a>], вместе с плагином <a href="https://shd101wyy.github.io/markdown-preview-enhanced/#/" target="_blank" rel="noopener">Markdown Enchanced Preview</a>.</p><p>Чтобы проверить, как выглядит пост, нужно запустить команду:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo serve</span><br></pre></td></tr></table></figure><br>и открыть в браузере страницу <code>http://127.0.0.1:4000/</code> (hexo отслеживает изменения исходников и сразу обновляет открытую страницу).</p><p>Сгенерировать статический сайт можно так:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure></p><p>Весь сгенерированный сайт будет содержаться в папке <code>public</code>, её можно заливать на хостинг руками или воспользоваться плагинами для автоматизации этих процессов.</p><h2 id="Итог"><a href="#Итог" class="headerlink" title="Итог"></a>Итог</h2><p>В кажущейся простой задаче “отрендерить markdown-статью в html”, cкрыт выбор целого стека способов решения (генераторы сайтов со своими языками, рендеры разных форматов и диалектов разметки, языки описания стилей и шаблонов сайта, темы, плагины, подсветка кода, системы развёртывания сайта).</p><p>В <code>hexo</code> эти вещи более-менее целостно сшиты вместе в единую систему, которой можно начать пользоваться достаточно быстро.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;После нескольких дней возни в очередной попытке собрать на &lt;code&gt;jekyll&lt;/code&gt; статический блог, решил забить на него и попробовать использовать для блога &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;hexo&lt;/a&gt;. Получилось сильно проще и приятнее.&lt;/p&gt;
&lt;p&gt;Во-первых, &lt;code&gt;hexo&lt;/code&gt; запускается легче, и темы работают сходу. И, что удобно для блога программисту, подсветка синтаксиса кода интегрирована в движок лучше, из чего следует, что темы скорее всего будут совместимы с ней (у &lt;code&gt;jekyll&lt;/code&gt; подобрать работающую пару “тема+плагин подсветки синтаксиса” оказалось очень непросто, то съезжала нумерация длинных строк, то весь блок с кодом выглядел коряво, то были проблемы с корректным отображения цвета строк или фона)&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="hexo" scheme="http://spiiin.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://spiiin.github.io/blog/16107/"/>
    <id>http://spiiin.github.io/blog/16107/</id>
    <published>2020-07-01T12:45:28.000Z</published>
    <updated>2020-12-26T01:59:28.806Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><strong>Hello, world!</strong><br>Немного тестов разметки<br><a id="more"></a></p><hr><p>Заголовки</p><h1 id="Заголовок1"><a href="#Заголовок1" class="headerlink" title="Заголовок1"></a>Заголовок1</h1><h2 id="Заголовок2"><a href="#Заголовок2" class="headerlink" title="Заголовок2"></a>Заголовок2</h2><hr><p>Код:</p><figure class="highlight nim"><table><tr><td class="code"><pre><span class="line">echo <span class="string">"code without line numbers"</span></span><br></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption><span>hello.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Code"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"with"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"line"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"numbers"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; end;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption><span>hello.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="built_in">std</span> &#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">tuple_element</span>&lt;0,Config&gt; &#123;</span> <span class="keyword">using</span> type = <span class="built_in">std</span>::string_view; &#125;;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">tuple_element</span>&lt;1,Config&gt; &#123;</span> <span class="keyword">using</span> type = <span class="built_in">std</span>::<span class="keyword">size_t</span>; &#125;;</span><br><span class="line">    <span class="keyword">template</span>&lt;&gt; <span class="class"><span class="keyword">struct</span> <span class="title">tuple_element</span>&lt;2,Config&gt; &#123;</span> <span class="keyword">using</span> type = <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;&amp;; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>Цитаты:</p><blockquote><p>“Citate from me”</p><footer><strong>spiiin</strong></footer></blockquote><hr><p>Списки:</p><ul><li>список1</li><li>список2<ul><li>список21</li><li>список22<ul><li><em>список221</em></li></ul></li></ul></li><li>список3</li></ul><p>Тест 2</p><ul><li><strong>Языки</strong><ul><li><a href="https://c++" target="_blank" rel="noopener">C++</a></li><li>C#</li><li>Python</li></ul></li><li><strong>Движки</strong><ul><li>Unity</li><li>Cocos2d</li><li>Godot</li></ul></li></ul><hr><p>Большой список с уточнениями:</p><p><strong><code>- Один</code></strong><br>Объяснение на много<br>много<br>много строк.</p><p><strong><code>- Два</code></strong><br>Длинное объяснение</p><p><strong><code>- Три</code></strong><br>Ещё одно объснение, в несколько предложений.<br>Или абзацев.</p><hr><p>Текст</p><p>болд - <strong>text</strong><br>курсив - <em>text</em><br>болд+курсив - <strong><em>text</em></strong><br>код - <code>code</code><br>код-болд - <strong><code>code-bold</code></strong></p><hr><p>Ссылки</p><p>Глобальная - <a href="https://google.com/" target="_blank" rel="noopener">Google</a><br>На пост в блоге - <a href="/blog/47121/" title="Hello, hexo">Hello, hexo</a></p><hr><p>Спойлер:</p><div class='spoiler collapsed'>    <div class='spoiler-title'>        gist    </div>    <div class='spoiler-content'>        <script src="//gist.github.com/44721f2e5a70294fa390218ad92385e4.js?file=james_bond_nim.nim"></script>    </div></div><hr><details><summary>Развернуть</summary><p>Текст</p></details><hr><p>Хинт</p><p>Не работает в начале строки - <span class="hint--info hint--rounded hint--top" data-hint="Multilinehint" ontouchstart>Test</span></p><hr><p>Таблицы</p><div class="table-container"><table><thead><tr><th>Tables</th><th style="text-align:center">Are</th><th style="text-align:right">Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td style="text-align:center"><em>right-aligned</em></td><td style="text-align:right">$1600</td></tr><tr><td>col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right">$12</td></tr><tr><td>zebra stripes</td><td style="text-align:center">are neat</td><td style="text-align:right">$1</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><code>Table Header 1</code></th><th><code>Table Header 2</code></th><th><code>Table Header 3</code></th></tr></thead><tbody><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr><tr><td>Division 1</td><td>Division 2</td><td>Division 3</td></tr></tbody></table></div><p>Backticks escape: `are` these!</p><hr><p>Картинки</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/blog/16107/fox.png" alt="fox"></h2><hr><p>Плагин для youtube:<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/GR18emXxAi0" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><hr><p>Плагин valkyr-url:</p><div class="vkr-url-wrapper"><style>.vkr-url-wrapper {    padding: 10px;    border-radius: 5px;    border: 1px solid;    border-color: #eee #ddd #bbb;    box-shadow: rgba(0,0,0,.14) 0 1px 3px;    margin-bottom: 10px;    display: flex;}.vkr-url-wrapper .desc-wrapper > hr {    margin: 10px 0;    height: 1px;}.vkr-url-wrapper .avatar {    width: 100px;    height: 100px;    border: solid 1px #eee;    box-shadow: none!important;    margin: 0;    margin-right: 10px;}.vkr-url-wrapper h2 {    border: none;    margin: 0;    padding: 0;}.vkr-url-wrapper .desc-wrapper {    flex: 1;}.vkr-url-wrapper .desc-wrapper a {    font-size: 22px;    font-weight: 700;}</style>            <a href="https://github.com/spiiin/CadEditor" target="_blank" rel="noopener"><img class="avatar" src="https://raw.githubusercontent.com/spiiin/CadEditor/master/CadEditor/cadIco.png" ></a>        <div class="desc-wrapper">        <a href="https://github.com/spiiin/CadEditor" target="_blank" rel="noopener">Cad Editor</a>        <hr />        <div class="desc">CadEditor is level editor for many classic console games</div>    </div></div><hr><p>Nomnoml diagram</p><img style="background-color:white;" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIyIiBoZWlnaHQ9IjE5OSIgdmVyc2lvbj0iMS4xIiBiYXNlUHJvZmlsZT0iZnVsbCIgdmlld2JveD0iMCAwIDIyMiAxOTkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmV2PSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHMiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MTJwdDsgZm9udC1mYW1pbHk6J0NhbGlicmknLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7O3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpyb3VuZCI+PHBhdGggZD0iTTE3Ny41IDQ0LjUgTDE3Ny41IDY0LjUgTDE3Ny41IDg0LjUgTDE3Ny41IDg0LjUgIiBzdHlsZT0ic3Ryb2tlOiMzMzMyMkU7ZmlsbDpub25lO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTsiPjwvcGF0aD4KPHBhdGggZD0iTTE3Mi4yIDcxLjIgTDE3Ny41IDc3LjggTDE4Mi44IDcxLjIgTDE3Ny41IDg0LjUgWiIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6IzMzMzIyRTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik00Ni41IDQzIEwyNi41IDY0LjUgTDI2LjUgODQuNSBMMjYuNSA4NC41ICIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6bm9uZTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik0yMS4yIDcxLjIgTDI2LjUgNzcuOCBMMzEuOCA3MS4yIEwyNi41IDg0LjUgWiIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6IzMzMzIyRTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik03Mi41IDQzIEw5Mi41IDY0LjUgTDkyLjUgODQuNSBMOTIuNSA4NC41ICIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6bm9uZTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik04Ny4yIDcxLjIgTDkyLjUgNzcuOCBMOTcuOCA3MS4yIEw5Mi41IDg0LjUgWiIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6IzMzMzIyRTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik0yNi41IDExNS41IEwyNi41IDEzNS41IEwyNi41IDE1NS41IEwyNi41IDE1NS41ICIgc3R5bGU9InN0cm9rZTojMzMzMjJFO2ZpbGw6bm9uZTtzdHJva2UtZGFzaGFycmF5Om5vbmU7Ij48L3BhdGg+CjxwYXRoIGQ9Ik0yMS4yIDE0Mi4yIEwyNi41IDE0OC44IEwzMS44IDE0Mi4yIEwyNi41IDE1NS41IFoiIHN0eWxlPSJzdHJva2U6IzMzMzIyRTtmaWxsOiMzMzMyMkU7c3Ryb2tlLWRhc2hhcnJheTpub25lOyI+PC9wYXRoPgo8cmVjdCB4PSI0Ni41IiB5PSIxMy41IiBoZWlnaHQ9IjMxIiB3aWR0aD0iMjYiIHN0eWxlPSJzdHJva2U6IzMzMzIyRTtmaWxsOiNlZWU4ZDU7c3Ryb2tlLWRhc2hhcnJheTpub25lOyI+PC9yZWN0Pgo8dGV4dCB4PSI1NC44IiB5PSIzNSIgc3R5bGU9IiI+MTwvdGV4dD4KPHJlY3QgeD0iMTMuNSIgeT0iODQuNSIgaGVpZ2h0PSIzMSIgd2lkdGg9IjI2IiBzdHlsZT0ic3Ryb2tlOiMzMzMyMkU7ZmlsbDojZWVlOGQ1O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTsiPjwvcmVjdD4KPHRleHQgeD0iMjEuOCIgeT0iMTA2IiBzdHlsZT0iIj4yPC90ZXh0Pgo8cmVjdCB4PSI3OS41IiB5PSI4NC41IiBoZWlnaHQ9IjMxIiB3aWR0aD0iMjYiIHN0eWxlPSJzdHJva2U6IzMzMzIyRTtmaWxsOiNlZWU4ZDU7c3Ryb2tlLWRhc2hhcnJheTpub25lOyI+PC9yZWN0Pgo8dGV4dCB4PSI4Ny44IiB5PSIxMDYiIHN0eWxlPSIiPjM8L3RleHQ+CjxyZWN0IHg9IjEzLjUiIHk9IjE1NS41IiBoZWlnaHQ9IjMxIiB3aWR0aD0iMjYiIHN0eWxlPSJzdHJva2U6IzMzMzIyRTtmaWxsOiNlZWU4ZDU7c3Ryb2tlLWRhc2hhcnJheTpub25lOyI+PC9yZWN0Pgo8dGV4dCB4PSIyMS44IiB5PSIxNzciIHN0eWxlPSIiPjQ8L3RleHQ+CjxyZWN0IHg9IjE0NS41IiB5PSIxMy41IiBoZWlnaHQ9IjMxIiB3aWR0aD0iNjQiIHN0eWxlPSJzdHJva2U6IzMzMzIyRTtmaWxsOiNlZWU4ZDU7c3Ryb2tlLWRhc2hhcnJheTpub25lOyI+PC9yZWN0Pgo8dGV4dCB4PSIxNTMuOCIgeT0iMzUiIHN0eWxlPSIiPmhlbGxvPC90ZXh0Pgo8cmVjdCB4PSIxNDUuNSIgeT0iODQuNSIgaGVpZ2h0PSIzMSIgd2lkdGg9IjY0IiBzdHlsZT0ic3Ryb2tlOiMzMzMyMkU7ZmlsbDojZWVlOGQ1O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTsiPjwvcmVjdD4KPHRleHQgeD0iMTUzLjgiIHk9IjEwNiIgc3R5bGU9IiI+d29ybGQ8L3RleHQ+PC9zdmc+" /><hr><p>Плагин для qrcode </p><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAAAAAAc6VLmAAAA6klEQVR42u3ZwQ6EIAxFUf7/p3GniaHlVZlMi7crDbHHBaEFWptHP+N6vY22NYGURepWmKlHo34WpHLSaJaYqU3JzIK0o6TOQqQPSKPUv5l7SFkkvz75AysrIVICSeg7hadF3TLSf6UejqefIdWQ1NmlrkGTVgapmuQ3rcLG1uxskIpIyo9E2ly5zCElldQWJXR2KmyAkbJKai5h1ZosU0iFJLkFFdcvuwgipZce3qnFz0mRKkmvz8LkSohUSApVpdB1C9KOUuiixH5F2kYSSpNymo5USApdncUv25AqSeo+129IhZNVpPTSAVWCHQugeNVrAAAAAElFTkSuQmCC" alt="hello, world" title="hello, world" class="hello world"></h2><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Hello, world!&lt;/strong&gt;&lt;br&gt;Немного тестов разметки&lt;br&gt;
    
    </summary>
    
    
    
      <category term="hexo" scheme="http://spiiin.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>CadEditor v5.0 Changelog</title>
    <link href="http://spiiin.github.io/blog/1634/"/>
    <id>http://spiiin.github.io/blog/1634/</id>
    <published>2018-05-09T07:54:00.000Z</published>
    <updated>2021-01-02T16:38:46.179Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Обновления редактора <a href="https://github.com/spiiin/cadeditor" target="_blank" rel="noopener">CadEditor</a> за год с <a href="https://spiiin.livejournal.com/108403.html" target="_blank" rel="noopener">версии 4.1</a>  </p><p>Почти для всех игр описан способ построения блоков из данных ROM-файла вместо картинок. Фактически, реализована наконец идея создания универсального редактора блоков, когда новые форматы могут быть добавлены с помощью файлов настроек, без изменения кода редактора.  </p><p>Почти для всех поддерживаемых игр добавлены конфиги блоков для всех основных уровней. Большая часть работы сделана другими пользователями. Хотя для добавления новых игр нет документации, большое количество примеров позволило пользователям добавлять подобные игры комбинированием готовых примеров.  </p><p>Написано несколько <a href="https://spiiin.github.io/CadEditor/">статей</a>, описывающих примеры работы с редактором, большинство - с видеопримерами. Создана <a href="https://spiiin.github.io/CadEditor/cadeditor-supported-games.html">нотация</a> для документирования того, как описаны уровни во всех поддерживаемых играх. Добавлено большое исследование устройства <a href="https://spiiin.livejournal.com/124652.html" target="_blank" rel="noopener">спецэффектов в NES-играх</a>.  </p><p>Добавлено редактирование игры со сжатием для NES (Felix the Cat), пока с примером ручного пережатия отредактированных данных с помощью <a href="https://github.com/spiiin/JupyterCadEditor/blob/master/CadEditor-Felix-decompress.ipynb" target="_blank" rel="noopener">скрипта на Python</a>.  </p><p>Проект <a href="https://github.com/spiiin/JupyterCadEditor" target="_blank" rel="noopener">JupyterCadEditor</a> (использование CadEditord в качестве библиотеки для Python в ноутбуках Jupyter) вынесен в отдельный репозиторий. Добавлены скрипты, позволяющие по конфигу игры для одного региона находить такие же данные для версии игры другого региона, что позволяет легко добавлять поддержку игр для разных регионов.  </p><p>Упрощён и улучшен рендер панелей и редакторов, убраны лишние масштабирования и “замыливание” при отрисовке.  </p><p>Добавлен плагин <a href="https://www.patreon.com/posts/september-2-2017-14324437" target="_blank" rel="noopener">экспорта карты в формат TMX</a>, для последующего использования её в редакторе <a href="https://www.mapeditor.org/" target="_blank" rel="noopener">Tiled</a>. Улучшены плагины экпорта блоков и экранов в картинки и бинарные файлы.  </p><p>Добавлено множество lua-скриптов для упрощения исследования игр и добавления их в редактор. Переписаны с Python на Lua скрипты автоматического поиска блоков различных форматов в видеопамяти - теперь они позволяют находить блоки прямо во время прохождения игры, без необходимости делать дампы памяти вручную.   </p><p>Добавлены lua-скрипты для эмулятора Mesen, позволяющие исследовать <a href="https://spiiin.livejournal.com/121112.html" target="_blank" rel="noopener">спецэффекты</a> в NES-играх, а также расширяющие возможности эмулятора в отладке.  </p><p>Добавлены утилиты для проверки целостности конфигов при обновлении версии редактора и исследования функций конфига без запуска самого редактора.  </p><p>Добавлен плагин, позволяющий пережимать данные и запаковывать их в ROM - <a href="https://www.youtube.com/watch?v=NfIWeDwu68w" target="_blank" rel="noopener">компрессор</a> для игры Contra Hard Corps.  </p><p>Плагин для запуска пользовательских скриптов из редактора и примеры его использования (экспорт скриншотов, экспорт блоков из игры для использования в <a href="https://www.youtube.com/watch?v=GR18emXxAi0" target="_blank" rel="noopener">демо-проектах</a>)  </p><p>Проект перешагнул первую <a href="https://github.com/spiiin/CadEditor/commit/f29ebd2437ae2f44950b1f5fb43a74b1230fc5fc" target="_blank" rel="noopener">тысячу</a> коммитов, а также переведён на .NET Framework 4.0. Редактор содержит более 1500 конфигов блоков и экранов различных уровней для 128 игр. Большая часть этих конфигов добавлена пользователями редактора, так что проект частично стал продуктом сообщества ромхакеров.  </p><p>Возможно, в следующих итерациях в редактор будут добавлены возможности универсального описания редактора объектов для уже добавленных игр, это такая же большая задача, как и создание универсального редактора блоков, но и её возможно решить.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Обновления
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="hack" scheme="http://spiiin.github.io/tags/hack/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Castlevania HD Pack</title>
    <link href="http://spiiin.github.io/blog/45580/"/>
    <id>http://spiiin.github.io/blog/45580/</id>
    <published>2018-05-04T19:27:00.000Z</published>
    <updated>2021-01-02T16:40:23.570Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Очень здоровская затея в современных эмуляторах - вытащить всю графику, улучшить её качество, и включить в эмуляторе использование этой улучшенной графики.  </p><p><a href="http://www.romhacking.net/forum/index.php?topic=26114" target="_blank" rel="noopener">Улучшенный пак</a> графики и музыки для первой Castlevania под эмулятор Mesen.  </p><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/D9SQei4eIqY" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><p>Записал прохождение, с помощью самописного скрипта для <a href="https://github.com/spiiin/CadEditor/tree/master/Stuff/nes_lua/mesen_savemovies" target="_blank" rel="noopener">перезаписи прохождений</a>, надеюсь автор эмулятора наконец добавит нормальную реализацию перезаписи в ближайших обновлениях.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Очень здор
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="games" scheme="http://spiiin.github.io/tags/games/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Шейдеры для NES игр</title>
    <link href="http://spiiin.github.io/blog/16778/"/>
    <id>http://spiiin.github.io/blog/16778/</id>
    <published>2018-04-21T11:57:00.000Z</published>
    <updated>2021-01-02T16:42:40.945Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Продолжаю изучать возможности lua-скриптов в эмуляторе Mesen. </p><p>Функции <a href="https://www.mesen.ca/docs/apireference/drawing.html#getscreenbuffer" target="_blank" rel="noopener">getScreenBuffer/setScreenBuffer</a> позволяют каждый кадр (или чаще) модифицировать содержимое экранного буфера. Так можно добавлять простые шейдеры постэффектов (да и сложные тоже). </p><p><a href="https://github.com/spiiin/CadEditor/blob/master/Stuff/nes_lua/mesen_modifyScreen.lua" target="_blank" rel="noopener">Скрипт</a> с эффектами красного экрана, мерцания, черезстрочного вывода и построчного “двоения экрана”. </p><p>Возможны также и более сложные эффекты (размытие движения, дождик, выделение контуров и т.п.), правда, не сильно удобно писать такое на Lua.</p><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/04KOJmRYwko" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Продолжаю 
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Ещё о криптокартинах</title>
    <link href="http://spiiin.github.io/blog/34124/"/>
    <id>http://spiiin.github.io/blog/34124/</id>
    <published>2018-03-27T19:45:00.000Z</published>
    <updated>2021-01-02T16:44:14.783Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Несколько месяцев назад я <a href="https://spiiin.dreamwidth.org/113215.html" target="_blank" rel="noopener">писал</a> о художнице, шифрующей в картинках приватные ключи от кошельков с биткоинами. Она делала многоуровневые загадки, обсуждение которых в итоге перенесла на закрытый форум, чтобы не решившие первые этапы задачи не могли пользоваться результатами других. А вот <a href="https://andybauch.com/" target="_blank" rel="noopener">Andy Bauch</a> поступил проще - сделал несколько картин с отдельными задачками и <a href="https://newmoney.andybauch.com/" target="_blank" rel="noopener">призами</a>. Картинки выложено из кубиков Лего.  </p><p>На хабре уже разобрали несколько решений (<a href="https://habrahabr.ru/post/352014/" target="_blank" rel="noopener">раз</a>, <a href="https://habrahabr.ru/post/351950/" target="_blank" rel="noopener">два</a>), кто-то даже успел решить пару задач. До меня, к сожалению, поздновато, дошло, так бы с удовольствием поучаствовал в решении.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Несколько 
      
    
    </summary>
    
    
    
      <category term="крипто" scheme="http://spiiin.github.io/tags/%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE/"/>
    
      <category term="картинки" scheme="http://spiiin.github.io/tags/%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8/"/>
    
  </entry>
  
  <entry>
    <title>Into the breach</title>
    <link href="http://spiiin.github.io/blog/65303/"/>
    <id>http://spiiin.github.io/blog/65303/</id>
    <published>2018-03-20T19:44:00.000Z</published>
    <updated>2021-01-02T16:45:11.786Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Очень, очень интересная тактика. Давненько не встречал такого, чтобы над каждым ходом необходимо было думать, иногда одного неправильного действия достаточно для проигрыша всей глобальной партии.</p><p>Разработчики добились этого за счёт того, что всегда огневой мощи отряда игрока не хватает для обезвреживания всех врагов, поэтому их чаще надо не уничтожать, а переставлять по полю так, чтобы они промахивались, а ещё лучше били друг друга. При этом враги угрожают не юнитам игрока, а беззащитным зданиям, которые приходится прикрывать юнитами, так как потеря нескольких зданий сразу ведёт к поражению не только в битве, но и во всей игре.</p><p>Интересно, что помимо основных 2 уровней планирования - тактического в битвах и стратегического на глобальной карте, присутствует ещё уровень метапланирования действий между играми - возможно пожертвовать целой игрой, ради того, чтобы получить достижение за игру и за очки достижений открыть более мощный отряд юнитов для следующей партии. Подобный ход, в совокупности с генерируемыми островами добавляет игре реиграбельности на десяток прохождений.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Очень, оче
      
    
    </summary>
    
    
    
      <category term="games" scheme="http://spiiin.github.io/tags/games/"/>
    
  </entry>
  
  <entry>
    <title>TMNT - Tournament Fighters [NES] Lua-скрипт для выполнения суперударов</title>
    <link href="http://spiiin.github.io/blog/29889/"/>
    <id>http://spiiin.github.io/blog/29889/</id>
    <published>2018-03-16T18:58:00.000Z</published>
    <updated>2021-01-02T16:46:34.475Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><a href="https://github.com/spiiin/CadEditor/blob/master/Stuff/nes_lua/tmnt4_moves.lua" target="_blank" rel="noopener">Скрипт</a>, позволяющий выполнять суперудары нажатием одной кнопки в лучшем файтинге на NES - TMNT: Tournament Fighters.</p><p>Упрощает игру с клавиатуры. Кроме обычных суперударов можно записывать и более сложные комбинации, доступные только профессиональным игрокам, например, обманный трюк Рафаэлем - активиция (но не выполнение) “сверла” зажатием кнопки назад, затем быстрый разбег, прыжок с ударом ногой, и выполнение сверла в прыжке с разбега.</p><p>Сложность движения в том, что разбег и прыжок должны быть выполнены очень быстро, пока игра всё ещё считает суперудар активированным. <a href="http://pscd.ru/codes/nescodes/tnescodes/6568-teenage-mutant-ninja-turtles-tournament-fighters-prohozhdenie-faq.html" target="_blank" rel="noopener">Детальное объяснение</a> игровой механики.</p><p>Видео:<br><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/t6A4h_GfsYI" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;&lt;a href=&quot;h
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Супер Марио в супер сломо</title>
    <link href="http://spiiin.github.io/blog/17738/"/>
    <id>http://spiiin.github.io/blog/17738/</id>
    <published>2018-03-11T13:51:00.000Z</published>
    <updated>2021-01-02T16:47:28.856Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><style>.embed-container {    position: relative;    padding-bottom: 56.25%;    height: 0;    overflow: hidden;    max-width: 100%;  }  .embed-container iframe, .embed-container object, .embed-container embed {    position: absolute;    top: 0;    left: 0;    width: 100%;    height: 100%;  }  </style><div class="embed-container"><iframe src="https://www.youtube.com/embed/3BJU2drrtCM" allowfullscreen frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;style&gt;.embed
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="link" scheme="http://spiiin.github.io/tags/link/"/>
    
  </entry>
  
  <entry>
    <title>Криптовалюты. За и против.</title>
    <link href="http://spiiin.github.io/blog/15418/"/>
    <id>http://spiiin.github.io/blog/15418/</id>
    <published>2018-03-06T08:11:00.000Z</published>
    <updated>2021-01-02T16:50:55.506Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><strong><code>ЗА</code></strong></p><p><code>Не существует ни одной идеальной национальной валюты для международных рассчётов</code>. Доллар не идеален и не вечен. От бреттон-вудской системы отказались именно из-за недостатков обмена доллара на золото и обратно. После этого все старательно делают вид, что проблемы нет (ямайская система). Из альтернатив - возврат к золоту или разделение стран по на несколько групп с доминированием различных валют/систем, причём группы должны быть полностью изолированы друг от друга, иначе вновь возникает вопрос об общей системе обмена между разными группами.  </p><p><code>Техническая неэффективность</code>. В плюсах потому, что является катализатором для развития системы, для того, чтобы программисты могли совершенствовать код. Можно с уверенностью сказать, что над биткоином и инфраструктурой вокруг него сейчас работают лучшие специалисты по криптографиии в мире, хакеры, в изначальном смысле этого слова, люди которые вникают в то, как устроены технические системы, которые придумали компьютеры и интернет и подарили их обществу.  </p><p><code>Считается, что блокчейн очень неэффективен в плане энергозатрат</code>, однако, не учитывается его относительная ценность и возможности по оптимизации. Никто ещё не измерял, намного ли полезнее тратить энергию видеокарт на видеоигры, новогодние гирлянды или всемирную систему хранения единиц ценности. Существует ли баланс между тем, насколько полезно иметь распределённую систему ответа на вопрос, кому принадлежит какая-либо ценность, и стоимостью поддержания работы такой системы? Очевидно, что следующие поколения криптовалют будут эффективнее того, что есть сейчас (а сейчас существуют только самые примитивные системы). Ещё один важный момент - если часть майнеров выключит свои фермы, система не станет работать хуже. Чем дешевле будет стоить криптовалюта, тем сильнее стимул обрабатывать экономнее в плане затрат энергии.  </p><p><code>Скорость реакции на изменения</code>. Очень подозрительный сработавший в нескольких странах феномен - население начинает больше доверять криптовалюте, чем своей национальной, в случае наступления пиздеца в экономике. Пока это лишь теория “гипербиткоинизации”, которой предстоит быть проверенной на практике более богатыми странами. Но, что может произойти с фиатными валютами в международных событиях за несколько десятилетий, вполне может произойти с криптовалютой за год - резкие скачки курса, международные договоры и запреты, распространение во многих странах. Если сейчас почти никто не принимает криптовалюты в качестве оплаты за товары - не значит, что так будет всегда, всё может измениться за несколько месяцев. Возможно, в будущем будет нормальным побыть богатым несколько часов. В обратную сторону это тоже может сработать.  </p><p><code>Устойчивость к санкциям, запретам и попыткам конфискации</code>. Данный плюс очевиден только для тех, кто сталкивался с тем, что у него что-то отбирали или запрещали использовать какую-либо систему. Те, кто не сталкивался с подобным, почему-то думают, что такое случается только со злобными нарушителями правил, и никогда не коснётся их самих. Пока государства не захватят контроль над кодом криптовалют и не зашьют туда необходимость соблюдение своих законов (спойлер - никогда), криптовалюты останутся “серой зоной” для тех, кому она нужна (это не только те, кто финансируют терроризм, покупают наркотики, отмывают деньги и распространяют детскую порнографию).  </p><p><strong><code>ПРОТИВ</code></strong></p><p><code>Сложность понимания</code>. Криптовалюты вводят много новых понятий, большая часть из которых являются неинтуитивными для непрофессоанала. Как так, все мои транзакции от первой до последней можно увидеть в блокчейне в любой момент, но я при этом могу оставаться анонимным? Почему я не могу однозначно посмотреть, сколько всего у меня есть денег, а все монеты (точнее UTXO) в моём кошельке размазаны по всем блокчейну? Почему если я провтыкал свой приватный ключ, то никто во всём мире (даже Самый Главный Президент, Суд и Крутой Друг-Компьютерщик) не может приказать вернуть мне мои деньги, если я потерял свой ключ?  </p><p><code>Анонимность</code> Её нет. При нынешней ситуации, соблюдать анонимность практически невозможно - одна мелкая ошибка (возможно, даже не лично ваша) может привести к потере анонимности большой группы пользователей. Уже сейчас есть тенденции на полный запрет анонимости в точках ввода/вывода валюты в фиат (KYС). Технически, соблюдая все правила безопасности, можно оставаться анонимным, но это требует множества усилий. Кроме того, человечество ещё не привыкло к анонимный личностям, и считает их чем-то мистическим. Для примера, сложно представить себе анонимного Сатоши Накамото, который существовал как личность в интернете (публиковал сообщения на форумах, коммитил код в репозитории), но не существует конкретного человека с таким именем, которому принадлежит самое большое количество биткоинов в мире.  </p><p><code>Безопасность</code>. Правило “Потерял ключ - потерял все связанные с ним деньги” имеет очевидный минус. Как часто обычно пользователи теряют пароли к своим компьютерам, аккаунтам в социальных сетях, онлайн-банкингам и подобным сервисам? Они явно не готовы к тому, чтобы терять право пользоваться своим аккаунтом навсегда, даже если аккаунт не имеет никакой стоимости. Что же делать в случаях, когда “аккаунт” - это напрямую деньги пользователя (возможно, все его сбережения). В настоящее время контроль над приватным ключом находится либо у пользователя (выше описанная ситуация с возможностью забыть ключ и потерять все связанные с ним деньги), либо у владельца сервиса, предоставляющего кошелёк. Тогда ключ может потерять (или украсть) владелец сервиса и пострадают сразу все пользователи сервиса одновременно. Оба варианты плохие, решение, возможно, в какой-либо форме совместного контроля, с передачей права на восстановление ключа независимой случайной группе лиц, размер группы варьируется от суммы спорных средств - снова же, встаёт вопрос о том, готов ли пользователь доверять право решения споров коллективному анонимному мнению (по сути, суд, в идеальном случае - как раз такое средство решения спорных вопросов сейчас).  </p><p><code>Революционность</code>. Сейчас криптовалюты существуют параллельно фиатным валютам, причем их курс медленно, но верно растёт (когда начинает расти быстро - я думаю, все это замечают). Происходит это не из-за пирамидности, как кажется тем, кто слышал про пирамиды, а из базовых определений инфлятора и дефлятора - биткоинов всегда будет существовать 21 миллион, а денежная масса M0 рублей, долларов и других валют постоянно становится больше. Очевидно, что при неизменном уровне спроса и предложения один биткоин будет стоить со временем дороже и дороже. Такая позиция не будет утраивать ни одно государство, которое хочет контролировать оборот денег на своей территории (то есть, вообще ни одно государство), поэтому законы против криптовалют будут становиться всё строже и строже. Пока мир находится на стадии, “обложим криптовалюты налогом, а там видно будет”, но при развитии ситуации криптовалюты начнут создавать угрозу фиатным валютам - тогда должно будет остаться что-то одно. Кроме того, если немного разобраться в идеологии шифропанков, то станет понятно, что причина, по которой создавались биткоины - не нажиться на них создателям, а попытка изменить общество.  </p><p><code>Незафиксированная децентрализация</code>. Децентрализация криптовалют заявлена, но нигде не зафиксирована. Нет никаких правил относительно запрета объединения большой группы пользователей в одном регионе или с одной целью. Устойчивость системы может зависеть от того, удастся ли захватить кому-либо контроль над большей её половиной или же контроль будет равномерно распределяться между несколькими относительно равными группировками. Майнинг пулы естественным образом объединяют майнеров в крупные группировки, пока что пулы не занимались продавливанием своих решений в ущерб интересам других пулов (ну, или просто я не знаю таких примеров), но сеть не защищена от разделения из-за умышленных действий крупных пулов.  </p><p><strong><code>На всякий случай, сразу ответы &quot;для чайников&quot; на вопрос - как заработать на криптовалютах?</code></strong> </p><p>Купить каких-нибудь криптомонет через ICO (вроде, это не запрещено ещё). Забудьте о них на год-два и продайте. Если проект, выпускащий ICO станет успешным, заработаете. Иначе - потеряете деньги.</p><p>Найдите работу с оплатой криптовалютой, и продавайте зарплату. Примеры проектов - steemit, gems, можно найти специализированные биржи фриланса.</p><p>Изучить технологии блокчейна и писать программы для работы с криптовалютами, в ближайшие годы программисты, умеющие это, будут цениться.</p><p><strong><code>Как не стоит пытаться заработать на криптовалютах (возможно, но намного сложнее, чем кажется)</code></strong>  </p><ul><li>Майнинг и тем более покупка виртуальных ресурсов для майнинга.</li><li>Игра на биржах и арбитраж.  </li><li>Купить биткоинов на все имеющиеся деньги.  </li><li>Продажа тренингов “как заработать миллион на биткоинах”.  </li></ul><p>(всё спорно, конечно)</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;c
      
    
    </summary>
    
    
    
      <category term="крипто" scheme="http://spiiin.github.io/tags/%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE/"/>
    
  </entry>
  
  <entry>
    <title>Сколько стоит сделать приложение типа WhatsApp</title>
    <link href="http://spiiin.github.io/blog/49834/"/>
    <id>http://spiiin.github.io/blog/49834/</id>
    <published>2018-03-06T00:59:00.000Z</published>
    <updated>2021-01-02T16:51:43.498Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Несколько ссылок, чтобы не потерялись.<br><a href="https://djangostars.com/blog/how-much-does-it-cost-to-build-a-messaging-app-like-whatsapp/" target="_blank" rel="noopener">https://djangostars.com/blog/how-much-does-it-cost-to-build-a-messaging-app-like-whatsapp/</a><br><a href="https://yalantis.com/blog/cost-of-mobile-messaging-app-development-types-kpis-landscape-recommended-approach-and-cost-of-development/" target="_blank" rel="noopener">https://yalantis.com/blog/cost-of-mobile-messaging-app-development-types-kpis-landscape-recommended-approach-and-cost-of-development/</a><br><a href="https://yalantis.com/blog/cost-of-mobile-messaging-app-development-types-kpis-landscape-recommended-approach-and-cost-of-development/" target="_blank" rel="noopener">https://erminesoft.com/how-much-does-it-cost-to-develop-a-chat-app-like-whatsapp/</a>  </p><p>Статьи говорят:<br>40-150К $ и 4-6 месяцев времени с командой в 5-6 человек.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Несколько 
      
    
    </summary>
    
    
    
      <category term="dev" scheme="http://spiiin.github.io/tags/dev/"/>
    
      <category term="link" scheme="http://spiiin.github.io/tags/link/"/>
    
  </entry>
  
  <entry>
    <title>Про распростренение мемов</title>
    <link href="http://spiiin.github.io/blog/7552/"/>
    <id>http://spiiin.github.io/blog/7552/</id>
    <published>2018-03-01T10:58:00.000Z</published>
    <updated>2021-01-02T16:52:09.825Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><a href="https://medium.com/@sergey_57776/%D0%BD%D0%B0%D0%B9%D0%B4%D0%B5%D0%BD-%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1-%D0%B7%D0%B0%D1%80%D0%B0%D0%B6%D0%B0%D1%82%D1%8C-%D0%B2%D1%8B%D1%80%D0%BE%D0%B4%D0%BA%D0%BE%D0%B2-655d46a3a891" target="_blank" rel="noopener">https://medium.com/@sergey_57776/%D0%BD%D0%B0%D0%B9%D0%B4%D0%B5%D0%BD-%D1%81%D0%BF%D0%BE%D1%81%D0%BE%D0%B1-%D0%B7%D0%B0%D1%80%D0%B0%D0%B6%D0%B0%D1%82%D1%8C-%D0%B2%D1%8B%D1%80%D0%BE%D0%B4%D0%BA%D0%BE%D0%B2-655d46a3a891</a> Если без воды - люди лучше заражаются идеями, если к носителям одних идей подсаживать носителей других в меньшей пропорции, и не давать не заражённым изолироваться.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;&lt;a href=&quot;h
      
    
    </summary>
    
    
    
      <category term="link" scheme="http://spiiin.github.io/tags/link/"/>
    
      <category term="меметика" scheme="http://spiiin.github.io/tags/%D0%BC%D0%B5%D0%BC%D0%B5%D1%82%D0%B8%D0%BA%D0%B0/"/>
    
  </entry>
  
  <entry>
    <title>Устройство спецэффектов на NES. Эффекты горизонтального скролла.</title>
    <link href="http://spiiin.github.io/blog/26104/"/>
    <id>http://spiiin.github.io/blog/26104/</id>
    <published>2018-02-21T22:34:00.000Z</published>
    <updated>2021-01-02T16:53:50.675Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p><code>TODO: восстановить гифки</code></p><p>В качестве примера для изучения спецэффектов на NES можно взять <a href="https://imgur.com/a/XJmb7" target="_blank" rel="noopener">эту коллекцию</a>.<br>Орудие для изучения - эмулятор <a href="https://spiiin.dreamwidth.org/115637.html" target="_blank" rel="noopener">Mesen</a> и скрипт <a href="https://github.com/spiiin/CadEditor/blob/master/Stuff/nes_lua/mesen_logParallax.lua" target="_blank" rel="noopener">mesen_logParallax.lua</a>.  </p><p>Он позволяет посмотреть, в каких играх используются эффекты горизонтального скролла, а в какие - что-то другое (анимации фона записью в видеопамять, смена видеобанков или что-либо ещё).  </p><p><a href="https://spiiin.dreamwidth.org/file/7131.png" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/7131.png" alt="" title="battletoads_tunnel"></a>  </p><p>Под катом будет объяснение того, что такое эффекты горизонтального скролла, какие именно они бывают и много гифок с примерами. Вас предупреждали!  </p><p>Итак, самое простое и не очень понятное объяснение: эффекты горизонтального скролла - группа спецэффектов, которая получается за счёт того, что видеопроцессор NES умеет сдвигать позицию скролла в ходе рисования кадра. В начале кадра для видеопроцессора можно установить горизонтальную и вертикальное позицию левого верхнего угла заготовленной картинки, которую он будет отрисовывать. Далее он начинает рисовать кадр строку за строкой - вот <a href="https://www.youtube.com/watch?v=3BJU2drrtCM" target="_blank" rel="noopener">интересный пример</a> этого процесса, снятый в супер сломо.  </p><p>Прямо в ходе рисования можно подправить позицию горизонтального скролла (но не вертикального!), чтобы оставшаяся часть экрана сдвинулась горизонтально относительно предыдущей - это и есть эффект горизонтального скролла. С теорией всё, дальше примеры того, что именно можно получить таким способом.  </p><p><strong>Отрисовка GUI снизу или сверху экрана</strong>Простейший и понятнейший пример - <em>Super Mario Bros</em>.<br><a href="https://spiiin.dreamwidth.org/file/7890.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/7890.gif" alt=""></a><br>Здесь очевидно, что часть экрана над зелёной полосой не скроллится совсем, в отличие от нижней. Трюки, которые используются для того, чтобы точно попасть в период, пока видеопроцессор отрисовывает конкретную строку, очень хитрые, и заслуживают отдельной статьи. Отмечу только то, что если в игре для отображения GUI используется чёрная панель - скорее всего в период отрисовки чёрных строк игра вообще выключает рендеринг, чтобы сделать что-то сложное, что возможно только при выключенном рендеринге.  </p><p><strong>Параллакс</strong>Эффект параллакса позволяет отобразить то, что для наблюдателя находящиеся дальше объекты движутся медленнее, чем более близкие. В более новых играх специально для реализации этого существует возможность рисовать на нескольких слоях, независимых друг от друга, но на NES их нет, поэтому разработчики эмулировали слои за счёт горизонтального скроллинга частей картинки. Важное ограничение таких слоёв - чтобы они никогда не пересекались по вертикали между собой, что можно проверить в скрипте (без разделяющей слои линии они игроку намного менее заметно, что слои полностью раздельные).  </p><p>Простейший пример - бегущий на фоне заката кот-ниндзя из <em>Kyatto Ninden Teyandee.</em><br><a href="https://spiiin.dreamwidth.org/file/8574.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/8574.gif" alt=""></a>  </p><p>Здесь, также как и в Марио, достаточно всего одного разделения экрана на подвижную и неподвижную часть (ну и второе разделение зону GUI, которое встречается почти в каждой игре, про него отдельно упоминать не буду).  </p><p>Более красивый и сложный пример - красная планета в <em>Bucky O’Hare:</em><br><a href="https://spiiin.dreamwidth.org/file/9282.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/9282.gif" alt=""></a>  </p><p>Здесь к статичному небу добавлен слой дальних облаков в небе и более близких гор. Без разделительных линий кажется, что существует ещё слой ландшафта между горами и слоем игрока за счёт того, что он однородный и глаз не может определить движется ли этот слой или нет. Есть много игр с примерами параллакса такого типа - <em>Joe &amp; Mac - Caveman Ninja, Totally Rad, Metal Fighter, Vice - Project Doom</em> и другие.  </p><p>Однако стоит помнить, что если вы видите эффект пересечения слоёв на одной горизонтали (параллакс <a href="https://www.youtube.com/watch?v=dWHPNnrTmKs&amp;feature=youtu.be&amp;t=24m23s" target="_blank" rel="noopener">за окошками</a> в другом уровне <em>Bucky O’Hare</em>) или вообще вертикальный параллакс (на стенках колодца 2 уровня <em>Battletoads</em>, стартовая заставка <em>Megaman 2</em>), помните - горизонтальный скролл невозможно изменить посреди строки - в этих играх используются другие эффекты.  </p><p>Отдельный интересный случай параллакса с движущимся дальним фоном - уровни с поездами, примеров много, пусть будет <em>Spartan X2:</em><br><a href="https://spiiin.dreamwidth.org/file/9973.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/9973.gif" alt=""></a>  </p><p>Параллакс также заметен, если камера находится внутри овального объекта или пещеры. В таком случае нижняя и верхняя часть будут ближе к камере, чем дальняя стена. Лучший пример - турбо-туннель в <em>Battletoads:</em><br><a href="https://spiiin.dreamwidth.org/file/10357.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/10357.gif" alt=""></a><br>Последняя пара примеров, посвящённая параллаксу, относится к случаю, когда отображаемая плоскость сильно наклонена по отношению к камере, в этом случае будет хорошо заметна разная скорость движения частей плоскости, и необходимо много слоёв для её отображения.  </p><p>Посмотрите на количество слоёв пола в <em>TMNT4: Tournament Fighters</em>:<br><a href="https://spiiin.dreamwidth.org/file/10959.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/10959.gif" alt=""></a><br>Либо на море в <em>TMNT3: Manhatten Project:</em>  </p><p><a href="https://spiiin.dreamwidth.org/file/11460.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/11460.gif" alt=""></a>  </p><p><strong>Отображение движения частей сцены</strong>  </p><p>Данный эффект применяется как для отображения крупных частей сцены (босс в <em>Tiny Toon Adventures</em>, другие игры с движением только горизонтальных платформ):  </p><p><a href="https://spiiin.dreamwidth.org/file/11980.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/11980.gif" alt=""></a><br>Так и для относительно мелких частей сцены, вплоть до отдельных строк (участки дороги при повороте в <em>Super Spy Hunter</em>):<br><a href="https://spiiin.dreamwidth.org/file/12494.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/12494.gif" alt=""></a>  </p><p>Участком сцены также может быть крупный объект, который изначально выглядит спрайтом, а не фоном , но является слишком крупным для спрайта, потому что спрайты имеют ограничение на размер, общее количество, а также количество в одной строке. Например, шар у босса зелёной планеты в <em>Bucky O’ Hare</em> (эта игра вообще очень богата на разные эффекты) рисуется фоном, но двигается отдельно от пола:<br><a href="https://spiiin.dreamwidth.org/file/13217.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/13217.gif" alt=""></a><br>Тут отдельно хочется упомянуть игру <em>Chip &amp; Dale Rescue Rangers 2</em> и больших боссов в ней. Они рисуются в фоне, но параллакса в игре нет. Геймдизайнеры решили проблему раздельного движения боссов и пола гениально - перед движением босса всегда потухает свет и пола не видно. Особенно эффектно это сделано на боссе Ведьма:<br><a href="https://spiiin.dreamwidth.org/file/13793.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/13793.gif" alt=""></a>  </p><p>Часто эффекты раздельного движения слоёв сцены применяются для эффектного появления текста или заставок. Сразу два эффекта на старте <em>Jurassic Park</em>:<br><a href="https://spiiin.dreamwidth.org/file/14535.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/14535.gif" alt=""></a>  </p><p> или просто красивого совмещения частей сцены:<br> <a href="https://spiiin.dreamwidth.org/file/14865.gif" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/14865.gif" alt=""></a><br> На этом у меня пока всё ^_^.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;&lt;code&gt;TODO
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="hack" scheme="http://spiiin.github.io/tags/hack/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Mesen - лучший эмулятор NES для отладки</title>
    <link href="http://spiiin.github.io/blog/15290/"/>
    <id>http://spiiin.github.io/blog/15290/</id>
    <published>2018-02-21T22:12:00.000Z</published>
    <updated>2021-01-02T16:55:18.683Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>Нашёл эмулятор NES, который лучше, чем FCEUX, подходит для отладки - <a href="https://www.mesen.ca/" target="_blank" rel="noopener">Mesen</a>.</p><p>Это проект одного человека, однако уже сейчас он выглядит лучше многих других эмуляторов и поддерживает некоторые очень нужные для отладки фичи. Во-первых - из коробки понимает отладочную информацию, генерируемую популярными ассемблерами asm6 и ca65, во-вторых (именно поэтому он удобнее для меня) - в него естественно интегрирована поддержка <a href="https://www.mesen.ca/docs/apireference/" target="_blank" rel="noopener">Lua</a>. В отличие от Lua для Fceux, здесь из неё можно получить намного больше информации о состоянии эмулятора (не только CPU и память, но также внутреннее состояние PPU и ALU). Бонусом также идёт удобное окно редактирования скрипта, поддержка выполнения одновременно нескольких скриптов и невозможность завесить эмулятор простой опечаткой в коде.  </p><p>За счёт этого можно наглядно посмотреть устройство спецэффектов в реальных играх. Например, <a href="https://github.com/spiiin/CadEditor/blob/master/Stuff/nes_lua/mesen_logParallax.lua" target="_blank" rel="noopener">небольшой скрипт</a> для того, чтобы отрисовывать линию в тех строчках кадра, где PPU меняет позицию горизонтального скролла (это одна из немногих возможностей для создания эффектов графики видеопроцессора консоли). За счёт этого видны “слои”, на которые делится картинка:  </p><p><a href="https://spiiin.dreamwidth.org/file/7131.png" target="_blank" rel="noopener"><img src="https://spiiin.dreamwidth.org/file/200x200/7131.png" alt="" title="battletoads_tunnel"></a><br>Верхний первый слой здесь используется для отображения интерфейса, второй и четвёртый слой отображают передний план, а третий слой - стены пещеры. Следующим постом выложу набор гифок, который показывает эффекты, достигаемые сменой позиции горизонтального скроллинга в разных играх.</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text&amp;#x2F;css&quot; href=&quot;https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css&quot;&gt;&lt;p&gt;Нашёл эмул
      
    
    </summary>
    
    
    
      <category term="nes" scheme="http://spiiin.github.io/tags/nes/"/>
    
      <category term="hack" scheme="http://spiiin.github.io/tags/hack/"/>
    
      <category term="lua" scheme="http://spiiin.github.io/tags/lua/"/>
    
  </entry>
  
</feed>
